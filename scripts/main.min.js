!function t(n,e,r){function i(u,a){if(!e[u]){if(!n[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[u]={exports:{}};n[u][0].call(c.exports,function(t){var e=n[u][1][t];return i(e?e:t)},c,c.exports,t,n,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,n,e){var r,i,o,u,a,l;r=jQuery,l=t("aye-aye/lib/games/bin-tic-tac-toe"),u=l.X,i=l.O,a=l.decode,o=t("aye-aye/lib/games/ultimate-tic-tac-toe").UltimateTicTacToe,o.prototype.state=function(){return{a:this.a,nextPlayer:this.nextPlayer,lastPlayedPosition:this.lastPlayedPosition,depth:this.depth}},r(function(){var t,n,e,l,s,c,f,p,h,y,v,m,d,g,x,w,b,P;return c=null,d=null,m=null,s=function(){return p()},l=function(){return e()},y=function(){var t;return t=c.nextPlayer===u?d:m,t.play()},v=function(){var t,n,e,i,o,a,l;for(t=c.nextPlayer===u?"x-playable-tile":"o-playable-tile",a=c.possibleActions(),i=0,o=a.length;o>i;i++)l=a[i],n=l[0],e=l[1],r("#"+n+"\\,"+e).addClass(t);return t},P=function(){return r(".tile").removeClass("x-playable-tile").removeClass("o-playable-tile").removeClass("human-playable-tile").off("click")},h=function(){var t,n,e,i,o;for(i=[],t=e=0;9>e;t=++e)i.push(function(){var e,i,a,l;for(a=c.winOn(t),l=[],e=0,i=a.length;i>e;e++)n=a[e],o=c.at(t,n)===u?"x-won-tile":"o-won-tile",l.push(r("#"+t+"\\,"+n).addClass(o));return l}());return i},n=function(){return c.isTerminal()?("function"==typeof d.end&&d.end(),"function"==typeof m.end&&m.end(),r("#game-over-text").text(function(){switch(!1){case!c.isWin(u):return"X Wins!";case!c.isWin(i):return"O Wins!";default:return"Draw!"}}()),r("#game-over").off("hidden.bs.modal").on("hidden.bs.modal",g).modal("show"),!0):!1},e=function(t){var e;return null==t&&(t=3),e=new Worker("scripts/minimax-worker.min.js"),e.postMessage({command:"setup",depth:t}),e.onmessage=function(t){var n,e,i;return f(),i=t.data.action,n=i[0],e=i[1],r("#"+n+"\\,"+e).text(a(c.nextPlayer).toLowerCase()).highlight(),c=c.play([n,e]),y()},{play:function(){return P(),h(),n()?void 0:(v(),x(),e.postMessage({command:"play",gameState:c.state()}))},end:function(){return e.terminate()}}},p=function(){var t,e;return t=function(t){return parseInt(t,10)},e=function(n){var e;return e=n.match(/(\d),(\d)/),[t(e[1]),t(e[2])]},{play:function(){var t;return P(),h(),n()?void 0:(t=v(),r("."+t).addClass("human-playable-tile").on("click",function(){var t;return t=r(this),t.text(a(c.nextPlayer).toLowerCase()),c=c.play(e(t.get(0).id)),y()}))}}},g=function(){return c=new o,d=s(),m=l(),r(".tile").removeClass("x-won-tile").removeClass("o-won-tile").text(""),y()},t=r("#spinner"),b=null,w=100,x=function(){return null==b?b=setTimeout(function(){return t.css("visibility","visible")},w):void 0},f=function(){return null!=b&&clearTimeout(b),t.css("visibility","hidden"),b=null},f(),new Spinner({lines:9,radius:7,length:7}).spin(t.get(0)),g()}),r.fn.highlight=function(){return r(this).each(function(){var t;return t=r(this),r("<div/>").width(t.outerWidth()).height(t.outerHeight()).css({position:"absolute",left:t.offset().left,top:t.offset().top,"background-color":"#ffff77",opacity:.7,"z-index":10}).appendTo("body").fadeOut(1e3).queue(function(){return r(this).remove()})})}},{"aye-aye/lib/games/bin-tic-tac-toe":2,"aye-aye/lib/games/ultimate-tic-tac-toe":3}],2:[function(t,n,e){var r,i,o,u,a,l,s,c,f,p,h,y,v,m,d,g,x,w,b,P,A,T,M,O,W,C,X,N,j,F,k,q=[].slice;C=t("../minimax"),i=C.MAX,o=C.MIN,X=[0,1,2],l=X[0],a=X[1],u=X[2],O=function(t){return 3&~t},y=function(t){return{0:" ",1:"X",2:"O"}[t]||function(){throw new Error(t)}()},d=0,f=function(t){var n,e,r,i,o;for(o=0,e=r=0,i=t.length;i>r;e=++r)n=t[e],o|=n<<2*e;return o},c=function(t,n){return t>>2*n&3},N=function(t){return[[c(t,0),c(t,1),c(t,2)],[c(t,3),c(t,4),c(t,5)],[c(t,6),c(t,7),c(t,8)]]},h=function(t){return[[c(t,0),c(t,3),c(t,6)],[c(t,1),c(t,4),c(t,7)],[c(t,2),c(t,5),c(t,8)]]},v=function(t){return[[c(t,0),c(t,4),c(t,8)],[c(t,2),c(t,4),c(t,6)]]},A=function(t){return q.call(N(t)).concat(q.call(h(t)),q.call(v(t)))},w=function(t){var n,e;for(n=e=0;18>e;n=e+=2)if(0===(3<<n&t))return!1;return!0},T={1:[21,1344,86016,4161,16644,66576,65793,4368],2:[42,2688,172032,8322,33288,133152,131586,8736]},W=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],P=function(t,n){var e,r,i,o;for(o=T[n]||function(){throw new Error(n)}(),e=0,r=o.length;r>e;e++)if(i=o[e],(i&t)===i)return!0;return!1},F=function(t){var n;return n=function(n){var e,r,i,o,u;for(u=T[n],e=r=0,i=u.length;i>r;e=++r)if(o=u[e],(o&t)===o)return W[e];return null},n(a)||n(u)||[]},b=function(t){return w(t)||P(t,a)||P(t,u)},M=function(t){var n,e,r;for(r=[],n=e=0;9>e;n=++e)0===(3<<2*n&t)&&r.push(n);return r},s=function(t,n){var e,r,i;for(i=[],e=r=0;18>r;e=r+=2)0===(3<<e&t)&&i.push(n<<e|t);return i},p=function(t,n){var e,r;for(e=r=0;18>r;e=++r)if((3<<2*e&t)!==(3<<2*e&n))return e;return null},k=.1,m=function(t,n){return null==n&&(n=0),Math.pow(k,n)*j(t)},j=function(t){return P(t,a)?2e3:P(t,u)?-2e3:w(t)?0:g(t)},x={},g=function(t){var n,e,r,i,o,l,s,c,f,p,h;if(null!=x[t])return x[t];for(f=0,s=A(t),n=0,i=s.length;i>n;n++){for(r=s[n],c=[0,0],h=c[0],l=c[1],e=0,o=r.length;o>e;e++)p=r[e],p===a&&++h,p===u&&++l;(0===h||0===l)&&(f+=Math.pow(10,h)-Math.pow(10,l))}return x[t]=f},r=function(){function t(t,n,e){this.value=null!=t?t:d,this.nextPlayer=null!=n?n:a,this.depth=null!=e?e:0}return t.create=function(){var n,e;return n=arguments[0],e=2<=arguments.length?q.call(arguments,1):[],null==n&&(n=[l,l,l,l,l,l,l,l,l]),function(t,n,e){e.prototype=t.prototype;var r=new e,i=t.apply(r,n);return Object(i)===i?i:r}(t,[f(n)].concat(q.call(e)),function(){})},t.prototype.at=function(t){return c(this.value,t)},t.prototype.rows=function(){return N(this.value)},t.prototype.columns=function(){return h(this.value)},t.prototype.diagonals=function(){return v(this.value)},t.prototype.lines=function(){return A(this.value)},t.prototype.isFull=function(){return w(this.value)},t.prototype.isWin=function(t){return P(this.value,t)},t.prototype.winOn=function(){return F(this.value)},t.prototype.isTerminal=function(){return b(this.value)},t.prototype.nextAgent=function(){return this.nextPlayer===a?i:o},t.prototype.openPositions=function(){return M(this.value)},t.prototype.possibleActions=function(){return s(this.value,this.nextPlayer)},t.prototype.action=function(t){return this.nextPlayer<<2*t|this.value},t.prototype.positionForAction=function(t){return p(this.value,t)},t.prototype.play=function(t){return new this.constructor(t,this.opponent(),this.depth+1)},t.prototype.utility=function(){return j(this.value)},t.prototype.opponent=function(t){return null==t&&(t=this.nextPlayer),O(t)},t.prototype.toString=function(){var t,n;return function(){var e,r,i,o;for(i=this.rows(),o=[],e=0,r=i.length;r>e;e++)n=i[e],o.push("|"+function(){var e,r,i;for(i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(y(t));return i}().join("|")+"|");return o}.call(this).join("\n")},t}(),n.exports={_:l,X:a,O:u,opponent:O,decode:y,empty:d,bin:f,at:c,rows:N,columns:h,diagonals:v,lines:A,isFull:w,isWin:P,isTerminal:b,openPositions:M,allPlays:s,changedOn:p,winOn:F,discountedUtility:m,utility:j,evaluate:g,BinTicTacToe:r}},{"../minimax":4}],3:[function(t,n,e){var r,i,o,u,a,l,s,c,f,p,h,y,v,m,d,g,x,w,b,P,A,T,M,O,W,C,X,N,j=[].slice;M=t("../minimax"),i=M.MAX,o=M.MIN,O=t("./bin-tic-tac-toe"),s=O._,l=O.X,u=O.O,y=O.decode,g=O.empty,f=O.bin,c=O.at,W=O.rows,p=O.columns,v=O.diagonals,A=O.lines,b=O.isWin,N=O.winOn,w=O.isTerminal,x=O.evaluate,r=O.BinTicTacToe,d=g,X=[d,d,d,d,d,d,d,d,d],C=function(t){var n,e,r,i;for(i=[],n=e=0,r=9;r>e;n=e+=3)i.push(t.slice(n,n+3));return i},h=function(t){var n,e,r;for(r=[],n=e=0;3>e;n=++e)r.push([t[n],t[n+3],t[n+6]]);return r},m=function(t){return[[t[0],t[4],t[8]],[t[2],t[4],t[6]]]},T=function(t){return j.call(C(t)).concat(j.call(h(t)),j.call(m(t)))},P=function(t,n){var e,r,i,o;for(o=T(t),i=0,r=o.length;r>i;i++)if(e=o[i],e.every(function(t){return b(t,n)}))return!0;return!1},a=function(){function t(t,n,e,r){this.a=null!=t?t:X,this.nextPlayer=null!=n?n:l,this.lastPlayedPosition=null!=e?e:4,this.depth=null!=r?r:0}return t.prototype.at=function(t,n){return c(this.a[t],n)},t.prototype.rows=function(){return C(this.a)},t.prototype.columns=function(){return h(this.a)},t.prototype.diagonals=function(){return m(this.a)},t.prototype.lines=function(){return T(this.a)},t.prototype.isTerminal=function(){return 0===this.possibleActions().length||this.isWin(l)||this.isWin(u)},t.prototype.isWin=function(t){return P(this.a,t)},t.prototype.winOn=function(t){return N(this.a[t])},t.prototype.nextAgent=function(){return this.nextPlayer===l?i:o},t.prototype.opponent=function(t){return null==t&&(t=this.nextPlayer),t===l?u:l},t.prototype.boardsForNextPlay=function(){var t,n,e,r,i,o;if(o=null!=this.lastPlayedPosition?this.a[this.lastPlayedPosition]:null,null==o||w(o)){for(i=[],r=this.a,t=e=0,n=r.length;n>e;t=++e)o=r[t],w(o)||i.push(t);return i}return[this.lastPlayedPosition]},t.prototype.openPositions=function(){var t,n,e,r,i,o,u,a,l;for(a=[],u=this.boardsForNextPlay(),i=0,r=u.length;r>i;i++){for(t=u[i],l=this.a[t],e=[],n=o=0;18>o;n=o+=2)0===(3<<n&l)&&e.push(n/2);a.push([t,e])}return a},t.prototype.action=function(t){return t},t.prototype.possibleActions=function(){var t,n,e,r,i,o,u,a,l,s;if(null!=this.actions)return this.actions;for(s=[],a=this.openPositions(),o=0,r=a.length;r>o;o++)for(l=a[o],t=l[0],e=l[1],u=0,i=e.length;i>u;u++)n=e[u],s.push([t,n]);return this.actions=s},t.prototype.play=function(t){var n,e,r;return e=t[0],r=t[1],n=this.a.slice(),n[e]=this.nextPlayer<<2*r|n[e],new this.constructor(n,this.opponent(),r,this.depth+1)},t.prototype.positionForAction=function(t){return t},t.prototype.utility=function(){var t,n,e,r,i,o,a,s,c,f,p,h;for(p=0,c=T(this.a),a=0,i=c.length;i>a;a++){for(r=c[a],f=[0,0,0],t=f[0],n=f[1],e=f[2],s=0,o=r.length;o>s;s++)h=r[s],b(h,l)?++t:b(h,u)&&++n,e+=x(h);(0===t||0===n)&&(p+=Math.pow(1e3,t)-Math.pow(1e3,n)),p+=e}return p},t.prototype.toString=function(){var t,n,e,r,i,o,u,a;for(i="",t=n=0;2>=n;t=++n){for(a=this.rows()[t],r=e=0;2>=e;r=++e)o=function(){var t,n,e;for(e=[],n=0,t=a.length;t>n;n++)u=a[n],e.push("|"+function(){var t,n,e,i;for(e=W(u)[r],i=[],n=0,t=e.length;t>n;n++)d=e[n],i.push(y(d));return i}().join("|")+"|");return e}(),i+=o.join(" ║ "),(2>t||2>r)&&(i+="\n");2>t&&(i+="════════╬═════════╬════════\n")}return i},t}(),n.exports={_:s,X:l,O:u,bin:f,UltimateTicTacToe:a}},{"../minimax":4,"./bin-tic-tac-toe":2}],4:[function(t,n,e){var r,i,o,u;u=["MAX","MIN"],r=u[0],i=u[1],o=function(){function t(t){this.depth=null!=t?t:1/0,this.rootAgent=r}return t.prototype.nextAction=function(t){var n,e,r;return this.rootAgent=t.nextAgent(),r=this.minimax(t),n=r[0],e=r[1],e},t.prototype.minimax=function(t,n,e,i){var o;return null==n&&(n=-(1/0)),null==e&&(e=+(1/0)),null==i&&(i=0),o=t.isTerminal(),o||t.nextAgent()!==this.rootAgent||++i,i>this.depth||o?[t.utility(),null]:t.nextAgent()===r?this.maxi(t,n,e,i):this.mini(t,n,e,i)},t.prototype.maxi=function(t,n,e,r){var i,o,u,a,l,s,c,f,p,h,y,v;for(c=[-(1/0),null],v=c[0],o=c[1],f=t.possibleActions(),a=0,l=f.length;l>a;a++){if(u=f[a],y=t.play(u),p=this.minimax(y,n,e,r),s=p[0],i=p[1],s>v&&(h=[s,u],v=h[0],o=h[1]),v>=e)return[v,o];n=Math.max(n,v)}return[v,o]},t.prototype.mini=function(t,n,e,r){var i,o,u,a,l,s,c,f,p,h,y,v;for(c=[+(1/0),null],v=c[0],o=c[1],f=t.possibleActions(),a=0,l=f.length;l>a;a++){if(u=f[a],y=t.play(u),p=this.minimax(y,n,e,r),s=p[0],i=p[1],v>s&&(h=[s,u],v=h[0],o=h[1]),n>=v)return[v,o];e=Math.min(e,v)}return[v,o]},t}(),n.exports={MAX:r,MIN:i,MinimaxAgent:o}},{}]},{},[1]);
//# sourceMappingURL=main.min.js.map
