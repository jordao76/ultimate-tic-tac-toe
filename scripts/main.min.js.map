{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app/scripts/highlight.coffee","main.min.js","app/scripts/index.coffee","app/scripts/spinner.coffee","app/scripts/web-rtc.coffee","node_modules/aye-aye/lib/games/bin-tic-tac-toe.js","node_modules/aye-aye/lib/games/ultimate-tic-tac-toe.js","node_modules/aye-aye/lib/minimax.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","$","jQuery","fn","highlight","this","each","el","width","outerWidth","height","outerHeight","css","position","left","offset","top","background-color","opacity","z-index","appendTo","fadeOut","queue","remove",2,"O","RTC","UltimateTicTacToe","X","decode","hideSpinner","ref","ref1","showSpinner","window","checkGameOver","computerPlayer","createPlayerO","createPlayerX","game","humanPlayer","lastAction","markWins","next","playAction","playable","playerO","playerText","playerX","remotePlayer","setup","teardown","unplayable","player","nextPlayer","play","className","j","k","len","ref2","ref3","possibleActions","addClass","removeClass","off","results","wonBy","wonClass","winOn","at","push","isTerminal","text","isWin","toLowerCase","action","int","parseAction","parseInt","match","done","playableClassName","on","$tile","get","id","toString","depth","worker","Worker","onmessage","data","postMessage","command","args","terminate","greet","ondatachannelopen","I_am_a_host","newGame","send_message","./highlight","./spinner","./web-rtc","aye-aye/lib/games/bin-tic-tac-toe","aye-aye/lib/games/ultimate-tic-tac-toe",3,"spinner","spinnerThresholdMs","spinnerTimeout","Spinner","lines","radius","target","setTimeout","spin","clearTimeout","stop",4,"Guest","Host","RTCPeerConnection","RTCSessionDescription","codeColor","configuration","constraints","g","h","mozRTCPeerConnection","webkitRTCPeerConnection","msRTCPeerConnection","mozRTCSessionDescription","webkitRTCSessionDescription","msRTCSessionDescription","iceServers","url","optional","DtlsSrtpKeyAgreement","peerConnection","dataChannel","onicecandidate","_this","candidate","onoffercreated","JSON","stringify","localDescription","prototype","setupDataChannel","createDataChannel","reliable","onopen","onchannelopen","parse","createOffer","offerDesc","setLocalDescription","console","warn","acceptAnswer","answerJSON","setRemoteDescription","send","onanswercreated","ondatachannel","channel","offer","offerJSON","createAnswer","answerDesc","log","clear","be_a_host","info","accept_answer","be_a_guest","I_am_a_guest","receive_offer","m",5,"BinTicTacToe","MAX","MIN","_","allPlays","bin","changedOn","columns","diagonals","discountedUtility","empty","evaluate","evaluateCache","isFull","masks","openPositions","opponent","positions","rows","utility","γ","slice","W","res","v","concat","ms","w","v1","v2","Math","pow","len1","score","x","value1","depth1","value","create","arguments","func","ctor","child","result","apply","Object","nextAgent","positionForAction","constructor","results1","join","../minimax",6,"columnsU","diagonalsU","isWinU","linesU","rowsU","ultimateEmpty","every","a1","lastPlayedPosition","who","boardsForNextPlay","js","ij","actions","arg","bri","ri","strRows","vs","p","./bin-tic-tac-toe",7,"MinimaxAgent","Infinity","rootAgent","nextAction","state","bestAction","minimax","α","β","ply","maxi","mini","nextValue","ref4","successor","max","min"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,GCAA,GAAAK,EAAAA,GAAIC,OAEJD,EAAEE,GAAGC,UAAY,WCIf,MDHCH,GAAEI,MAAMC,KAAK,WACZ,GAAAC,ECKA,ODLAA,GAAKN,EAAEI,MACPJ,EAAE,UACCO,MAAMD,EAAGE,cACTC,OAAOH,EAAGI,eACVC,KACCC,SAAY,WACZC,KAAQP,EAAGQ,SAASD,KACpBE,IAAOT,EAAGQ,SAASC,IACnBC,mBAAoB,UACpBC,QAAW,GACXC,UAAW,KACZC,SAAS,QACTC,QAAQ,KACRC,MAAM,WCAP,MDAWrB,GAAEI,MAAMkB,mBCMnBC,GAAG,SAASlC,EAAQU,EAAOJ,GCrBjC,GAAAK,GAAAwB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAAAhC,GAAIC,OAEJ6B,EAAiBzC,EAAQ,qCAAxBsC,EAAAG,EAAAH,EAAGH,EAAAM,EAAAN,EAAGI,EAAAE,EAAAF,OACNF,EAAqBrC,EAAQ,0CAA7BqC,kBAEDK,EAA6B1C,EAAQ,aAApC2C,EAAAD,EAAAC,YAAaH,EAAAE,EAAAF,YACdxC,EAAQ,eAEPoC,EAAOpC,EAAQ,aAAfoC,IACDQ,OAAOR,IAAMA,EAEbzB,EAAE,WAEA,GAAAkC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CDqQA,OCrQAb,GAAO,KACPS,EAAU,KACVF,EAAU,KACVL,EAAa,KACbH,EAAgB,WD4Bd,MC5BiBE,MACnBH,EAAgB,WD8Bd,MC9BiBD,MASnBO,EAAO,WACL,GAAAU,ED2BA,OC3BAD,KACAV,IACAW,EAAYd,EAAKe,aAAc1B,EAAOoB,EAAaF,EACnDO,EAAOE,QAETV,EAAW,WACT,GAAAW,GAAAjE,EAAAkE,EAAAC,EAAAC,EAAAC,EAAAC,CAEA,KAFAL,EACKjB,EAAKe,aAAc1B,EAAO,kBAAuB,kBACtDgC,EAAArB,EAAAuB,kBAAAJ,EAAA,EAAAC,EAAAC,EAAA9D,OAAA6D,EAAAD,EAAAA,ID0BEG,EAAOD,EAAKF,GC1BTnE,EAAAsE,EAAA,GAAGJ,EAAAI,EAAA,GACN5D,EAAE,IAAIV,EAAE,MAAKkE,GACVM,SAASP,ED2Bd,OC1BAA,IAEFJ,EAAa,WD2BX,MC1BAnD,GAAE,SACC+D,YAAY,mBACZA,YAAY,mBACZA,YAAY,uBACZC,IAAI,UAETvB,EAAW,WACT,GAAAnD,GAAAkE,EAAAC,EAAA/D,EAAAgE,EAAAC,EAAAM,EAAAC,EAAAC,CDwBA,KCxBAF,KAAS3E,EAAAmE,EAAA,EAAA,EAAAA,EAAAnE,IAAAmE,EAAT,CAEE,IADAS,EAAQ,KACRP,EAAArB,EAAA8B,MAAA9E,GAAAI,EAAA,EAAAgE,EAAAC,EAAA9D,OAAA6D,EAAAhE,EAAAA,ID0BE8D,EAAIG,EAAKjE,GCzBTwE,EAAQ5B,EAAK+B,GAAG/E,EAAGkE,GACnBW,EAAcD,IAASvC,EAAO,aAAkB,aAC/C3B,EAAE,IAAIV,EAAE,MAAKkE,GAAKM,SAASK,EAC3B,OAAAD,GACDC,EAAcD,IAASvC,EAAO,cAAmB,cD4BjDsC,EAAQK,KC3BPtE,EAAE,IAAMV,GAAGwE,SAASK,KD6BrBF,EAAQK,KAAK,QAGjB,MAAOL,IC9BT/B,EAAgB,WACd,MAAiBI,GAAKiC,cACtBvE,EAAE,SACCwE,KADH,WACQ,QAAA,GAAA,KACClC,EAAKmC,MAAM9C,GDmCd,MCnCsB,SADpB,MAECW,EAAKmC,MAAMjD,GDoCd,MCpCsB,SAFpB,SDwCF,MCrCG,cACT,IANO,GAQTsB,EAAa,WDwCX,MCxCelB,GAAOU,EAAKe,YAAYqB,eAEzC/B,EAAa,SAACgC,GACZ,GAAArF,GAAAkE,CD8CA,OC9CClE,GAAAqF,EAAA,GAAGnB,EAAAmB,EAAA,GACJ9C,IACA7B,EAAE,IAAIV,EAAE,MAAKkE,GACVgB,KAAK1B,KACL3C,YACHmC,EAAOA,EAAKgB,KAAKqB,GACjBnC,EAAamC,EACbjC,KAEFH,EAAc,WACZ,GAAAqC,GAAAC,CDgDA,OChDAD,GAAM,SAAC3F,GDyCL,MCzCW6F,UAAS7F,EAAG,KACzB4F,EAAc,SAACL,GACb,GAAAO,ED4CA,OC5CAA,GAAQP,EAAKO,MAAM,cACjBH,EAAIG,EAAM,IAAMH,EAAIG,EAAM,OAC9B9B,MAAO,SAAC+B,GD8CJ,MC9CaA,MACjB1B,KAAM,WACJ,GAAA2B,EAAA,KAAU/C,IDoDR,MCnDF+C,GAAoBrC,IACpB5C,EAAE,IAAIiF,GACHnB,SAAS,uBACToB,GAAG,QAAS,WACX,GAAAC,GAAAR,CDmDA,OCnDAQ,GAAQnF,EAAEI,MACVuE,EAASE,EAAYM,EAAMC,IAAI,GAAGC,IAClC1C,EAAWgC,MACjBW,SAAU,WDoDN,MCpDS,WAEfnD,EAAiB,SAACoD,GAChB,GAAAC,ED2DA,OAJa,OAATD,ICxDYA,EAAQ,GACxBC,EAAa,GAAAC,QAAO,kCACpBxC,MAAO,SAAC+B,GDqEJ,MCpEFQ,GAAOE,UAAY,SAAC7G,GD4DhB,MC5DsB8D,GAAW9D,EAAE8G,KAAKhB,SAC5Ca,EAAOI,aAAYC,QAAS,QAASC,MAAOP,MAAAA,KAC5CP,KACF1B,KAAM,WACJ,MAAUpB,KAAV,QACAU,IACAZ,IACAwD,EAAOI,aAAYC,QAAS,OAAQC,MAAOtD,WAAAA,OAC7CU,SAAU,WD4EN,MC5ESsC,GAAOO,aACpBT,SAAU,WD8EN,MC9ES,cAEf7D,EAAIuE,QACJvE,EAAIwE,kBAAoB,WDgGtB,MC9FGxE,GAAIyE,aACL7D,EAAgB,WDgFd,MChFiBE,MACnBH,EAAgB,WDkFd,MClFiBY,QAEnBX,EAAgB,WDoFd,MCpFiBW,MACnBZ,EAAgB,WDsFd,MCtFiBG,OACrBU,KAEFD,EAAe,WACb,GAAAmD,EDoGA,OCpGAA,GAAU,WD0FR,MC1FW1E,GAAI2E,aAAa,QAC7BpG,EAAE,iBAAiBkF,GAAG,QAASiB,GAChC1E,EAAIiE,UAAY,SAACC,GACf,MAAW,QAARA,EAAmB1C,IAAaN,EAAWgD,KAChD1C,MAAO,SAAC+B,GDkGJ,MClGaA,MACjB1B,KAAM,WAIJ,MAHOpB,OACLU,IACAZ,KAC6B,MAAAQ,EAA/Bf,EAAI2E,aAAa5D,GAAjB,QACFU,SAAU,WDwGN,MCxGUlD,GAAE,iBAAiBgE,IAAI,QAASmC,IAC9Cb,SAAU,WD0GN,MC1GS,YAEfrC,EAAQ,WACN,GAAAU,GAAAC,CDmHA,OCnHAV,KACAZ,EAAO,GAAIZ,GACXc,EAAa,KACbmB,GAAsBtB,IAAiBD,KAAtCW,EAAAY,EAAA,GAASd,EAAAc,EAAA,GAEVC,GAAkCxB,EAAeC,GAAhDA,EAAAuB,EAAA,GAAexB,EAAAwB,EAAA,GAChB5D,EAAE,SACCwE,KAAKzB,EAAU,OAASF,GAC3BE,EAAQE,MAAM,WD4GZ,MC5GeJ,GAAQI,MAAM,WD6G3B,MC7G8BP,UAEpCQ,EAAW,WD4HT,MAZe,OAAXH,GAC8B,kBAArBA,GAAQG,UChHrBH,EAASG,WDoHM,MAAXL,GAC8B,kBAArBA,GAAQK,UCpHrBL,EAASK,WACTrB,IACA7B,EAAE,gBACC+D,YAAY,eACZA,YAAY,eACf/D,EAAE,SACC+D,YAAY,cACZA,YAAY,cACZS,KAAK,KAEVxE,EAAE,iBACCkF,GAAG,QAASjC,GAEfA,QDoHCoD,cAAc,EAAEC,YAAY,EAAEC,YAAY,EAAEC,oCAAoC,EAAEC,yCAAyC,IAAIC,GAAG,SAASrH,EAAQU,EAAOJ,GExR7J,GAAAK,GAAA6B,EAAAG,EAAA2E,EAAAC,EAAAC,CAAA7G,GAAIC,OAEJ0G,EAAc,GAAAG,UAAQC,MAAO,EAAGC,OAAQ,EAAGnH,OAAQ,IACnDgH,EAAiB,KACjBD,EAAqB,IACrB5E,EAAc,WACZ,GAAAiF,EAAA,OAAO,OAAAJ,GACLI,EAAUjH,EAAE,YAAYoF,IAAI,GAC5ByB,EACEK,WAAW,WFmSX,MEnSeP,GAAQQ,KAAKF,IAASL,IAHzC,QAIF/E,EAAc,WF4SZ,ME3S+B,OAAAgF,GAA/BO,aAAaP,GACbF,EAAQU,OACRR,EAAiB,MAEnB9G,EAAOJ,SAAWqC,YAAAA,EAAaH,YAAAA,QFgTzByF,GAAG,SAASjI,EAAQU,EAAOJ,GG7TjC,GAAA4H,GAAAC,EAAA/F,EAAAgG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAAAN,GACExF,OAAOwF,mBACPxF,OAAO+F,sBACP/F,OAAOgG,yBACPhG,OAAOiG,oBACTR,EACEzF,OAAOyF,uBACPzF,OAAOkG,0BACPlG,OAAOmG,6BACPnG,OAAOoG,wBAETT,GAAgBU,aAAaC,IAAK,wBAClCV,GAAcW,WAAWC,sBAAsB,KAEzCjB,EAAA,WAES,QAAAA,KACXpH,KAACsI,eAAqB,GAAAjB,GAAkBG,EAAeC,GACvDzH,KAACuI,YAAc,KAEfvI,KAACsI,eAAeE,eAAiB,SAAAC,GHqU/B,MGrU+B,UAAChK,GAChC,MAAkB,QAAfA,EAAEiK,UACHD,EAACE,eAAeC,KAAKC,UAAUJ,EAACH,eAAeQ,mBADjD,SAD+B9I,MHgXnC,MAnCAoH,GAAK2B,UGzULC,iBAAkB,WHkVhB,MGjVAhJ,MAACuI,YAAcvI,KAACsI,eAAeW,kBAAkB,QAAQC,UAAU,IACnElJ,KAACuI,YAAYY,OAAS,SAAAV,GH4UpB,MG5UoB,YH6UlB,MG7UqBA,GAACW,kBAAJpJ,MACtBA,KAACuI,YAAYjD,UAAY,SAAAmD,GHgVvB,MGhVuB,UAAChK,GHiVtB,MGjV4BgK,GAACnD,UAAUsD,KAAKS,MAAM5K,EAAE8G,SAA/BvF,OHsV3BoH,EAAK2B,UGpVLO,YAAa,WHsVX,MGrVAtJ,MAACgJ,mBACDhJ,KAACsI,eAAegB,YAAa,SAAAb,GHqV3B,MGrV2B,UAACc,GHsV1B,MGtVwCd,GAACH,eAAekB,oBAAoBD,KAAnDvJ,MAC3B,WHwVA,MGxVGyJ,SAAQC,KAAK,4BH4VpBtC,EAAK2B,UG1VLY,aAAc,SAACC,GH2Vb,MG1VA5J,MAACsI,eAAeuB,qBAAyB,GAAAvC,GAAsBsB,KAAKS,MAAMO,MH6V5ExC,EAAK2B,UG3VLe,KAAM,SAACvE,GH4VL,MG5VcvF,MAACuI,YAAYuB,KAAKlB,KAAKC,UAAUtD,KH+V1C6B,KG7VHD,EAAA,WAES,QAAAA,KACXnH,KAACsI,eAAqB,GAAAjB,GAAkBG,EAAeC,GACvDzH,KAACuI,YAAc,KAEfvI,KAACsI,eAAeE,eAAiB,SAAAC,GHgW/B,MGhW+B,UAAChK,GAChC,MAAkB,QAAfA,EAAEiK,UACHD,EAACsB,gBAAgBnB,KAAKC,UAAUJ,EAACH,eAAeQ,mBADlD,SAD+B9I,MAIjCA,KAACsI,eAAe0B,cAAgB,SAAAvB,GHmW9B,MGnW8B,UAAChK,GHwW7B,MGvWFgK,GAACF,YAAc9J,EAAEwL,SAAWxL,EAC5BgK,EAACF,YAAYY,OAAS,WHoWlB,MGpWqBV,GAACW,iBAC1BX,EAACF,YAAYjD,UAAY,SAAC7G,GHsWtB,MGtW4BgK,GAACnD,UAAUsD,KAAKS,MAAM5K,EAAE8G,UAH1BvF,MH8XlC,MAfAmH,GAAM4B,UG1WNmB,MAAO,SAACC,GH4WN,MG3WAnK,MAACsI,eAAeuB,qBAAyB,GAAAvC,GAAsBsB,KAAKS,MAAMc,KAC1EnK,KAACsI,eAAe8B,aAAc,SAAA3B,GH2W5B,MG3W4B,UAAC4B,GH4W3B,MG5W0C5B,GAACH,eAAekB,oBAAoBa,KAApDrK,MAC5B,WH8WA,MG9WGyJ,SAAQC,KAAK,6BHkXpBvC,EAAM4B,UGhXNe,KAAM,SAACvE,GHiXL,MGjXcvF,MAACuI,YAAYuB,KAAKlB,KAAKC,UAAUtD,KHoX1C4B,KGlXTxH,EAAOJ,SAAW6H,KAAAA,EAAMD,MAAAA,GAIxBI,EAAY,mCAEZI,EAAI,GAAIP,GACRO,EAAEgB,eAAiB,SAACwB,GH0XlB,MGzXAV,SAAQa,IAAI,KAAK1B,KAAKC,UAAUsB,GAAa5C,GAC7CkC,QAAQa,IAAI,2GAA4G/C,IAC1HI,EAAEyB,cAAgB,WH6XhB,MG5XAK,SAAQc,QACRd,QAAQa,IAAI,2BH2X4B,kBAA1BjJ,GAAIwE,kBG1XlBxE,EAAIwE,oBAAA,QACN8B,EAAErC,UAAY,SAACC,GH8Xb,MG7XAkE,SAAQa,IAAI,iBAAkB/E,GH6XE,kBAAlBlE,GAAIiE,UG5XlBjE,EAAIiE,UAAWC,GAAA,QAEjBmC,EAAI,GAAIP,GACRO,EAAEqC,gBAAkB,SAACH,GHgYnB,MG/XAH,SAAQa,IAAI,KAAK1B,KAAKC,UAAUe,GAAcrC,GAC9CkC,QAAQa,IAAI,wDACd5C,EAAE0B,cAAgB,WHmYhB,MGlYAK,SAAQc,QACRd,QAAQa,IAAI,4BHiY4B,kBAA1BjJ,GAAIwE,kBGhYlBxE,EAAIwE,oBAAA,QACN6B,EAAEpC,UAAY,SAACC,GHoYb,MGnYAkE,SAAQa,IAAI,kBAAmB/E,GHmYC,kBAAlBlE,GAAIiE,UGlYlBjE,EAAIiE,UAAWC,GAAA,QAEjBlE,GACEmJ,UAAW,WHsYT,MGrYAxK,MAAC8F,aAAc,EACf6B,EAAE2B,cACFG,QAAQgB,KAAK,YACfC,cAAe,SAACd,GHqYd,MGpYAjC,GAAEgC,aAAaC,IACjBe,WAAY,WHuYV,MGtYA3K,MAAC4K,cAAe,EAChBnB,QAAQa,IAAI,0EAA2E/C,IACzFsD,cAAe,SAACV,GHwYd,MGvYAzC,GAAEwC,MAAMC,GACRV,QAAQgB,KAAK,YACfzE,aAAc,SAAC8E,GACb,MAAG9K,MAAC8F,YAAiB6B,EAAEmC,KAAKgB,GAAOpD,EAAEoC,KAAKgB,IAC5ClF,MAAO,WH8YL,MG7YA6D,SAAQa,IAAI,mEAAoE/C,GAChFkC,QAAQa,IAAI,gDAAiD/C,KAEjE5H,EAAOJ,QAAQ8B,IAAMA,OHiZf0J,GAAG,SAAS9L,EAAQU,EAAOJ,GIjgBjC,GAAAyL,GAAAC,EAAAC,EAAA9J,EAAAG,EAAA4J,EAAAC,EAAAnH,EAAAoH,EAAAC,EAAAC,EAAA/J,EAAAgK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA1H,EAAAE,EAAAsC,EAAAmF,EAAAC,EAAAC,EAAAC,EAAAvK,EAAAC,EAAAuK,EAAAC,EAAAnI,EAAAoI,EACAC,KAAAA,KAEA3K,GAAAzC,EAAA,cAAAgM,EAAAvJ,EAAAuJ,IAAAC,EAAAxJ,EAAAwJ,IAEAvJ,GAAA,EAAA,EAAA,GAAAwJ,EAAAxJ,EAAA,GAAAJ,EAAAI,EAAA,GAAAP,EAAAO,EAAA,GAEAqK,EAAA,SAAAM,GACA,MAAA,IAAAA,GAGA9K,EAAA,SAAA8K,GACA,OACA,EAAA,IACA5M,EAAA,IACAyB,EAAA,KACAmL,IAAA,WACA,KAAA,IAAAlN,OAAAkN,OAIAZ,EAAA,EAEAL,EAAA,SAAArM,GACA,GAAAP,GAAAS,EAAAkE,EAAAE,EAAAiJ,CAEA,KADAA,EAAA,EACArN,EAAAkE,EAAA,EAAAE,EAAAtE,EAAAS,OAAA6D,EAAAF,EAAAlE,IAAAkE,EACA3E,EAAAO,EAAAE,GACAqN,GAAA9N,GAAA,EAAAS,CAEA,OAAAqN,IAGAtI,EAAA,SAAAuI,EAAAtN,GACA,MAAAsN,IAAA,EAAAtN,EAAA,GAGAgN,EAAA,SAAAM,GACA,QAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,KAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,KAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,MAGAjB,EAAA,SAAAiB,GACA,QAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,KAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,KAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,MAGAhB,EAAA,SAAAgB,GACA,QAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,KAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,GAAAvI,EAAAuI,EAAA,MAGA7F,EAAA,SAAA6F,GACA,MAAAH,GAAA7M,KAAA0M,EAAAM,IAAAC,OAAAJ,EAAA7M,KAAA+L,EAAAiB,IAAAH,EAAA7M,KAAAgM,EAAAgB,MAGAX,EAAA,SAAAW,GACA,GAAAtN,GAAAkE,CACA,KAAAlE,EAAAkE,EAAA,EAAA,GAAAA,EAAAlE,EAAAkE,GAAA,EACA,GAAA,KAAA,GAAAlE,EAAAsN,GACA,OAAA,CAGA,QAAA,GAGAV,GACApM,GAAA,GAAA,KAAA,MAAA,KAAA,MAAA,MAAA,MAAA,MACAyB,GAAA,GAAA,KAAA,OAAA,KAAA,MAAA,OAAA,OAAA,OAGA8K,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAEA5H,EAAA,SAAAmI,EAAAF,GACA,GAAAlJ,GAAAE,EAAAwH,EAAA4B,CAIA,KAHAA,EAAAZ,EAAAQ,IAAA,WACA,KAAA,IAAAlN,OAAAkN,MAEAlJ,EAAA,EAAAE,EAAAoJ,EAAAjN,OAAA6D,EAAAF,EAAAA,IAEA,GADA0H,EAAA4B,EAAAtJ,IACA0H,EAAA0B,KAAA1B,EACA,OAAA,CAGA,QAAA,GAGA9G,EAAA,SAAAwI,GACA,GAAAG,EAYA,OAXAA,GAAA,SAAAL,GACA,GAAApN,GAAAkE,EAAAE,EAAAwH,EAAA4B,CAEA,KADAA,EAAAZ,EAAAQ,GACApN,EAAAkE,EAAA,EAAAE,EAAAoJ,EAAAjN,OAAA6D,EAAAF,EAAAlE,IAAAkE,EAEA,GADA0H,EAAA4B,EAAAxN,IACA4L,EAAA0B,KAAA1B,EACA,MAAAmB,GAAA/M,EAGA,OAAA,OAEAyN,EAAApL,IAAAoL,EAAAvL,QAGA+C,EAAA,SAAAqI,GACA,MAAAX,GAAAW,IAAAnI,EAAAmI,EAAAjL,IAAA8C,EAAAmI,EAAApL,IAGA2K,EAAA,SAAAS,GACA,GAAAtN,GAAAkE,EAAAS,CAEA,KADAA,KACA3E,EAAAkE,EAAA,EAAA,EAAAA,EAAAlE,IAAAkE,EACA,KAAA,GAAA,EAAAlE,EAAAsN,IACA3I,EAAAK,KAAAhF,EAGA,OAAA2E,IAGAuH,EAAA,SAAAoB,EAAAF,GACA,GAAApN,GAAAkE,EAAAmJ,CAEA,KADAA,KACArN,EAAAkE,EAAA,EAAA,GAAAA,EAAAlE,EAAAkE,GAAA,EACA,KAAA,GAAAlE,EAAAsN,IACAD,EAAArI,KAAAoI,GAAApN,EAAAsN,EAGA,OAAAD,IAGAjB,EAAA,SAAAsB,EAAAC,GACA,GAAA3N,GAAAkE,CACA,KAAAlE,EAAAkE,EAAA,EAAA,GAAAA,EAAAlE,IAAAkE,EACA,IAAA,GAAA,EAAAlE,EAAA0N,MAAA,GAAA,EAAA1N,EAAA2N,GACA,MAAA3N,EAGA,OAAA,OAGAkN,EAAA,GAEAX,EAAA,SAAAe,EAAArH,GAIA,MAHA,OAAAA,IACAA,EAAA,GAEA2H,KAAAC,IAAAX,EAAAjH,GAAAgH,EAAAK,IAGAL,EAAA,SAAAK,GACA,MAAAnI,GAAAmI,EAAAjL,GACA,IACA8C,EAAAmI,EAAApL,GACA,KACAyK,EAAAW,GACA,EAEAb,EAAAa,IAIAZ,KAEAD,EAAA,SAAAa,GACA,GAAApJ,GAAAC,EAAA/D,EAAAgE,EAAA0J,EAAAlO,EAAAyE,EAAAC,EAAAyJ,EAAAN,EAAAO,CACA,IAAA,MAAAtB,EAAAY,GACA,MAAAZ,GAAAY,EAIA,KAFAS,EAAA,EACA1J,EAAAoD,EAAA6F,GACApJ,EAAA,EAAAE,EAAAC,EAAA9D,OAAA6D,EAAAF,EAAAA,IAAA,CAGA,IAFA9D,EAAAiE,EAAAH,GACAI,GAAA,EAAA,GAAA0J,EAAA1J,EAAA,GAAA1E,EAAA0E,EAAA,GACAH,EAAA,EAAA2J,EAAA1N,EAAAG,OAAAuN,EAAA3J,EAAAA,IACAsJ,EAAArN,EAAA+D,GACAsJ,IAAApL,KACA2L,EAEAP,IAAAvL,KACAtC,GAGA,IAAAoO,GAAA,IAAApO,KACAmO,GAAAH,KAAAC,IAAA,GAAAG,GAAAJ,KAAAC,IAAA,GAAAjO,IAGA,MAAA8M,GAAAY,GAAAS,GAGAjC,EAAA,WAcA,QAAAA,GAAAmC,EAAAlK,EAAAmK,GACApN,KAAAqN,MAAA,MAAAF,EAAAA,EAAAzB,EACA1L,KAAAiD,WAAA,MAAAA,EAAAA,EAAA1B,EACAvB,KAAAmF,MAAA,MAAAiI,EAAAA,EAAA,EAoGA,MApHApC,GAAAsC,OAAA,WACA,GAAAtO,GAAA0G,CAKA,OAJA1G,GAAAuO,UAAA,GAAA7H,EAAA,GAAA6H,UAAA9N,OAAA4M,EAAA7M,KAAA+N,UAAA,MACA,MAAAvO,IACAA,GAAAmM,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAEA,SAAAqC,EAAA9H,EAAA+H,GACAA,EAAA1E,UAAAyE,EAAAzE,SACA,IAAA2E,GAAA,GAAAD,GAAAE,EAAAH,EAAAI,MAAAF,EAAAhI,EACA,OAAAmI,QAAAF,KAAAA,EAAAA,EAAAD,GACA1C,GAAAK,EAAArM,IAAAyN,OAAAJ,EAAA7M,KAAAkG,IAAA,eASAsF,EAAAjC,UAAA9E,GAAA,SAAA/E,GACA,MAAA+E,GAAAjE,KAAAqN,MAAAnO,IAGA8L,EAAAjC,UAAAmD,KAAA,WACA,MAAAA,GAAAlM,KAAAqN,QAGArC,EAAAjC,UAAAwC,QAAA,WACA,MAAAA,GAAAvL,KAAAqN,QAGArC,EAAAjC,UAAAyC,UAAA,WACA,MAAAA,GAAAxL,KAAAqN,QAGArC,EAAAjC,UAAApC,MAAA,WACA,MAAAA,GAAA3G,KAAAqN,QAGArC,EAAAjC,UAAA8C,OAAA,WACA,MAAAA,GAAA7L,KAAAqN,QAGArC,EAAAjC,UAAA1E,MAAA,SAAAiI,GACA,MAAAjI,GAAArE,KAAAqN,MAAAf,IAGAtB,EAAAjC,UAAA/E,MAAA,WACA,MAAAA,GAAAhE,KAAAqN,QAGArC,EAAAjC,UAAA5E,WAAA,WACA,MAAAA,GAAAnE,KAAAqN,QAGArC,EAAAjC,UAAA+E,UAAA,WACA,MAAA9N,MAAAiD,aAAA1B,EACA0J,EAEAC,GAIAF,EAAAjC,UAAAgD,cAAA,WACA,MAAAA,GAAA/L,KAAAqN,QAGArC,EAAAjC,UAAAtF,gBAAA,WACA,MAAA2H,GAAApL,KAAAqN,MAAArN,KAAAiD,aAGA+H,EAAAjC,UAAAxE,OAAA,SAAArF,GACA,MAAAc,MAAAiD,YAAA,EAAA/D,EAAAc,KAAAqN,OAGArC,EAAAjC,UAAAgF,kBAAA,SAAAxJ,GACA,MAAA+G,GAAAtL,KAAAqN,MAAA9I,IAGAyG,EAAAjC,UAAA7F,KAAA,SAAAmK,GACA,MAAA,IAAArN,MAAAgO,YAAAX,EAAArN,KAAAgM,WAAAhM,KAAAmF,MAAA,IAGA6F,EAAAjC,UAAAoD,QAAA,WACA,MAAAA,GAAAnM,KAAAqN,QAGArC,EAAAjC,UAAAiD,SAAA,SAAAM,GAIA,MAHA,OAAAA,IACAA,EAAAtM,KAAAiD,YAEA+I,EAAAM,IAGAtB,EAAAjC,UAAA7D,SAAA,WACA,GAAAzG,GAAAG,CACA,OAAA,YACA,GAAAwE,GAAAE,EAAAC,EAAAM,CAGA,KAFAN,EAAAvD,KAAAkM,OACArI,KACAT,EAAA,EAAAE,EAAAC,EAAA9D,OAAA6D,EAAAF,EAAAA,IACAxE,EAAA2E,EAAAH,GACAS,EAAAK,KAAA,IAAA,WACA,GAAAb,GAAA2J,EAAAiB,CAEA,KADAA,KACA5K,EAAA,EAAA2J,EAAApO,EAAAa,OAAAuN,EAAA3J,EAAAA,IACA5E,EAAAG,EAAAyE,GACA4K,EAAA/J,KAAA1C,EAAA/C,GAEA,OAAAwP,MACAC,KAAA,KAAA,IAEA,OAAArK,IACArE,KAAAQ,MAAAkO,KAAA,OAGAlD,KAIArL,EAAAJ,SACA4L,EAAAA,EACA5J,EAAAA,EACAH,EAAAA,EACA4K,SAAAA,EACAxK,OAAAA,EACAkK,MAAAA,EACAL,IAAAA,EACApH,GAAAA,EACAiI,KAAAA,EACAX,QAAAA,EACAC,UAAAA,EACA7E,MAAAA,EACAkF,OAAAA,EACAxH,MAAAA,EACAF,WAAAA,EACA4H,cAAAA,EACAX,SAAAA,EACAE,UAAAA,EACAtH,MAAAA,EACAyH,kBAAAA,EACAU,QAAAA,EACAR,SAAAA,EACAX,aAAAA,KJqgBGmD,aAAa,IAAIC,GAAG,SAASnP,EAAQU,EAAOJ,GK90B/C,GAAAyL,GAAAC,EAAAC,EAAA9J,EAAAE,EAAAC,EAAA4J,EAAAlH,EAAAoH,EAAAE,EAAA8C,EAAA7M,EAAAgK,EAAA8C,EAAA7P,EAAAiN,EAAAC,EAAAxH,EAAAE,EAAAkK,EAAA5H,EAAA6H,EAAA9M,EAAAC,EAAAuK,EAAAuC,EAAAC,EAAA1K,EACAqI,KAAAA,KAEA3K,GAAAzC,EAAA,cAAAgM,EAAAvJ,EAAAuJ,IAAAC,EAAAxJ,EAAAwJ,IAEAvJ,EAAA1C,EAAA,qBAAAkM,EAAAxJ,EAAAwJ,EAAA5J,EAAAI,EAAAJ,EAAAH,EAAAO,EAAAP,EAAAI,EAAAG,EAAAH,OAAAkK,EAAA/J,EAAA+J,MAAAL,EAAA1J,EAAA0J,IAAApH,EAAAtC,EAAAsC,GAAAiI,EAAAvK,EAAAuK,KAAAX,EAAA5J,EAAA4J,QAAAC,EAAA7J,EAAA6J,UAAA7E,EAAAhF,EAAAgF,MAAAtC,EAAA1C,EAAA0C,MAAAL,EAAArC,EAAAqC,MAAAG,EAAAxC,EAAAwC,WAAAwH,EAAAhK,EAAAgK,SAAAX,EAAArJ,EAAAqJ,aAEAvM,EAAAiN,EAEAgD,GAAAjQ,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,GAEAgQ,EAAA,SAAAzP,GACA,GAAAE,GAAA4L,EAAAvH,EAAAM,CAEA,KADAA,KACA3E,EAAA4L,EAAA,EAAAvH,EAAA,EAAAA,EAAAuH,EAAA5L,EAAA4L,GAAA,EACAjH,EAAAK,KAAAlF,EAAAqN,MAAAnN,EAAAA,EAAA,GAEA,OAAA2E,IAGAwK,EAAA,SAAArP,GACA,GAAAE,GAAA4L,EAAAjH,CAEA,KADAA,KACA3E,EAAA4L,EAAA,EAAA,EAAAA,EAAA5L,IAAA4L,EACAjH,EAAAK,MAAAlF,EAAAE,GAAAF,EAAAE,EAAA,GAAAF,EAAAE,EAAA,IAEA,OAAA2E,IAGAyK,EAAA,SAAAtP,GACA,QAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,MAGAwP,EAAA,SAAAxP,GACA,MAAAqN,GAAA7M,KAAAiP,EAAAzP,IAAAyN,OAAAJ,EAAA7M,KAAA6O,EAAArP,IAAAqN,EAAA7M,KAAA8O,EAAAtP,MAGAuP,EAAA,SAAAvP,EAAAsN,GACA,GAAAhN,GAAAgE,EAAAwH,EAAAvH,CAEA,KADAA,EAAAiL,EAAAxP,GACA8L,EAAA,EAAAxH,EAAAC,EAAA9D,OAAA6D,EAAAwH,EAAAA,IAEA,GADAxL,EAAAiE,EAAAuH,GACAxL,EAAAqP,MAAA,SAAAnC,GACA,MAAAnI,GAAAmI,EAAAF,KAEA,OAAA,CAGA,QAAA,GAGAhL,EAAA,WACA,QAAAA,GAAAsN,EAAA3L,EAAA4L,EAAA1J,GACAnF,KAAAhB,EAAA,MAAA4P,EAAAA,EAAAF,EACA1O,KAAAiD,WAAA,MAAAA,EAAAA,EAAA1B,EACAvB,KAAA6O,mBAAA,MAAAA,EAAAA,EAAA,EACA7O,KAAAmF,MAAA,MAAAA,EAAAA,EAAA,EAuLA,MApLA7D,GAAAyH,UAAA9E,GAAA,SAAA/E,EAAAkE,GACA,MAAAa,GAAAjE,KAAAhB,EAAAE,GAAAkE,IAGA9B,EAAAyH,UAAAmD,KAAA,WACA,MAAAuC,GAAAzO,KAAAhB,IAGAsC,EAAAyH,UAAAwC,QAAA,WACA,MAAA8C,GAAArO,KAAAhB,IAGAsC,EAAAyH,UAAAyC,UAAA,WACA,MAAA8C,GAAAtO,KAAAhB,IAGAsC,EAAAyH,UAAApC,MAAA,WACA,MAAA6H,GAAAxO,KAAAhB,IAGAsC,EAAAyH,UAAA5E,WAAA,WACA,MAAA,KAAAnE,KAAAyD,kBAAAhE,QAAAO,KAAAqE,MAAA9C,IAAAvB,KAAAqE,MAAAjD,IAGAE,EAAAyH,UAAA1E,MAAA,SAAAiI,GACA,MAAAiC,GAAAvO,KAAAhB,EAAAsN,IAGAhL,EAAAyH,UAAA/E,MAAA,SAAA9E,GACA,MAAA8E,GAAAhE,KAAAhB,EAAAE,KAGAoC,EAAAyH,UAAA+E,UAAA,WACA,MAAA9N,MAAAiD,aAAA1B,EACA0J,EAEAC,GAIA5J,EAAAyH,UAAAiD,SAAA,SAAA8C,GAIA,MAHA,OAAAA,IACAA,EAAA9O,KAAAiD,YAEA6L,IAAAvN,EACAH,EAEAG,GAIAD,EAAAyH,UAAAgG,kBAAA,WACA,GAAA7P,GAAAoE,EAAAwH,EAAAvH,EAAAgJ,EAAAC,CAEA,IADAA,EAAA,MAAAxM,KAAA6O,mBAAA7O,KAAAhB,EAAAgB,KAAA6O,oBAAA,KACA,MAAArC,GAAArI,EAAAqI,GAEA,CAGA,IAFAD,KACAhJ,EAAAvD,KAAAhB,EACAE,EAAA4L,EAAA,EAAAxH,EAAAC,EAAA9D,OAAA6D,EAAAwH,EAAA5L,IAAA4L,EACA0B,EAAAjJ,EAAArE,GACAiF,EAAAqI,IACAD,EAAArI,KAAAhF,EAGA,OAAAqN,GAVA,OAAAvM,KAAA6O,qBAcAvN,EAAAyH,UAAAgD,cAAA,WACA,GAAA7M,GAAAkE,EAAA4L,EAAA1L,EAAAwH,EAAAnM,EAAA4E,EAAAgJ,EAAAC,CAGA,KAFAD,KACAhJ,EAAAvD,KAAA+O,oBACAjE,EAAA,EAAAxH,EAAAC,EAAA9D,OAAA6D,EAAAwH,EAAAA,IAAA,CAIA,IAHA5L,EAAAqE,EAAAuH,GACA0B,EAAAxM,KAAAhB,EAAAE,GACA8P,KACA5L,EAAAzE,EAAA,EAAA,GAAAA,EAAAyE,EAAAzE,GAAA,EACA,KAAA,GAAAyE,EAAAoJ,IACAwC,EAAA9K,KAAAd,EAAA,EAGAmJ,GAAArI,MAAAhF,EAAA8P,IAEA,MAAAzC,IAGAjL,EAAAyH,UAAAxE,OAAA,SAAA0K,GACA,MAAAA,IAGA3N,EAAAyH,UAAAtF,gBAAA,WACA,GAAAvE,GAAAkE,EAAA4L,EAAA1L,EAAA0J,EAAAlC,EAAAnM,EAAA4E,EAAAC,EAAA+I,CACA,IAAA,MAAAvM,KAAAkP,QACA,MAAAlP,MAAAkP,OAIA,KAFA3C,KACAhJ,EAAAvD,KAAA+L,gBACAjB,EAAA,EAAAxH,EAAAC,EAAA9D,OAAA6D,EAAAwH,EAAAA,IAEA,IADAtH,EAAAD,EAAAuH,GAAA5L,EAAAsE,EAAA,GAAAwL,EAAAxL,EAAA,GACA7E,EAAA,EAAAqO,EAAAgC,EAAAvP,OAAAuN,EAAArO,EAAAA,IACAyE,EAAA4L,EAAArQ,GACA4N,EAAArI,MAAAhF,EAAAkE,GAGA,OAAApD,MAAAkP,QAAA3C,GAGAjL,EAAAyH,UAAA7F,KAAA,SAAAiM,GACA,GAAAnQ,GAAAE,EAAAkE,CAIA,OAHAlE,GAAAiQ,EAAA,GAAA/L,EAAA+L,EAAA,GACAnQ,EAAAgB,KAAAhB,EAAAqN,QACArN,EAAAE,GAAAc,KAAAiD,YAAA,EAAAG,EAAApE,EAAAE,GACA,GAAAc,MAAAgO,YAAAhP,EAAAgB,KAAAgM,WAAA5I,EAAApD,KAAAmF,MAAA,IAGA7D,EAAAyH,UAAAgF,kBAAA,SAAAxJ,GACA,MAAAA,IAGAjD,EAAAyH,UAAAoD,QAAA,WACA,GAAAjN,GAAAkE,EAAAC,EAAA/D,EAAAgE,EAAA0J,EAAAlC,EAAAnM,EAAA4E,EAAAC,EAAAyJ,EAAAT,CAGA,KAFAS,EAAA,EACA1J,EAAAiL,EAAAxO,KAAAhB,GACA8L,EAAA,EAAAxH,EAAAC,EAAA9D,OAAA6D,EAAAwH,EAAAA,IAAA,CAGA,IAFAxL,EAAAiE,EAAAuH,GACAtH,GAAA,EAAA,EAAA,GAAAtE,EAAAsE,EAAA,GAAAJ,EAAAI,EAAA,GAAAH,EAAAG,EAAA,GACA7E,EAAA,EAAAqO,EAAA1N,EAAAG,OAAAuN,EAAArO,EAAAA,IACA6N,EAAAlN,EAAAX,GACA0F,EAAAmI,EAAAjL,KACArC,EACAmF,EAAAmI,EAAApL,MACAgC,EAEAC,GAAAsI,EAAAa,IAEA,IAAAtN,GAAA,IAAAkE,KACA6J,GAAAH,KAAAC,IAAA,IAAA7N,GAAA4N,KAAAC,IAAA,IAAA3J,IAEA6J,GAAA5J,EAEA,MAAA4J,IAGA3L,EAAAyH,UAAA7D,SAAA,WACA,GAAAkK,GAAAtE,EAAAnM,EAAA0Q,EAAAxQ,EAAAyQ,EAAA9C,EAAA+C,CAEA,KADA1Q,EAAA,GACAuQ,EAAAtE,EAAA,EAAA,GAAAA,EAAAsE,IAAAtE,EAAA,CAEA,IADAyE,EAAAvP,KAAAkM,OAAAkD,GACAC,EAAA1Q,EAAA,EAAA,GAAAA,EAAA0Q,IAAA1Q,EACA2Q,EAAA,WACA,GAAAhM,GAAAxE,EAAA+E,CAEA,KADAA,KACA/E,EAAA,EAAAwE,EAAAiM,EAAA9P,OAAA6D,EAAAxE,EAAAA,IACA0N,EAAA+C,EAAAzQ,GACA+E,EAAAK,KAAA,IAAA,WACA,GAAA8I,GAAAwC,EAAAjM,EAAA0K,CAGA,KAFA1K,EAAA2I,EAAAM,GAAA6C,GACApB,KACAuB,EAAA,EAAAxC,EAAAzJ,EAAA9D,OAAAuN,EAAAwC,EAAAA,IACA/Q,EAAA8E,EAAAiM,GACAvB,EAAA/J,KAAA1C,EAAA/C,GAEA,OAAAwP,MACAC,KAAA,KAAA,IAEA,OAAArK,MAEAhF,GAAAyQ,EAAApB,KAAA,QACA,EAAAkB,GAAA,EAAAC,KACAxQ,GAAA,KAGA,GAAAuQ,IACAvQ,GAAA,iCAGA,MAAAA,IAGAyC,KAIA3B,EAAAJ,SACA4L,EAAAA,EACA5J,EAAAA,EACAH,EAAAA,EACAiK,IAAAA,EACA/J,kBAAAA,KLk1BG6M,aAAa,EAAEsB,oBAAoB,IAAIC,GAAG,SAASzQ,EAAQU,EAAOJ,GM1kCrE,GAAA0L,GAAAC,EAAAyE,EAAAjO,CAEAA,IAAA,MAAA,OAAAuJ,EAAAvJ,EAAA,GAAAwJ,EAAAxJ,EAAA,GAEAiO,EAAA,WACA,QAAAA,GAAAxK,GACAnF,KAAAmF,MAAA,MAAAA,EAAAA,EAAAyK,EAAAA,EACA5P,KAAA6P,UAAA5E,EAwEA,MArEA0E,GAAA5G,UAAA+G,WAAA,SAAAC,GACA,GAAA5E,GAAA6E,EAAArO,CAGA,OAFA3B,MAAA6P,UAAAE,EAAAjC,YACAnM,EAAA3B,KAAAiQ,QAAAF,GAAA5E,EAAAxJ,EAAA,GAAAqO,EAAArO,EAAA,GACAqO,GAGAL,EAAA5G,UAAAkH,QAAA,SAAAF,EAAAG,EAAAC,EAAAC,GACA,GAAAjM,EAcA,OAbA,OAAA+L,IACAA,IAAAN,EAAAA,IAEA,MAAAO,IACAA,IAAAP,EAAAA,IAEA,MAAAQ,IACAA,EAAA,GAEAjM,EAAA4L,EAAA5L,aACAA,GAAA4L,EAAAjC,cAAA9N,KAAA6P,aACAO,EAEAA,EAAApQ,KAAAmF,OAAAhB,GACA4L,EAAA5D,UAAA,MACA4D,EAAAjC,cAAA7C,EACAjL,KAAAqQ,KAAAN,EAAAG,EAAAC,EAAAC,GAEApQ,KAAAsQ,KAAAP,EAAAG,EAAAC,EAAAC,IAIAT,EAAA5G,UAAAsH,KAAA,SAAAN,EAAAG,EAAAC,EAAAC,GACA,GAAAjF,GAAAnM,EAAAuF,EAAArF,EAAAoE,EAAAiN,EAAA5O,EAAA4B,EAAAC,EAAAgN,EAAAC,EAAAjE,CAGA,KAFA7K,KAAAiO,EAAAA,GAAA,MAAApD,EAAA7K,EAAA,GAAA3C,EAAA2C,EAAA,GACA4B,EAAAwM,EAAAtM,kBACAvE,EAAA,EAAAoE,EAAAC,EAAA9D,OAAA6D,EAAApE,EAAAA,IAAA,CAOA,GANAqF,EAAAhB,EAAArE,GACAuR,EAAAV,EAAA7M,KAAAqB,GACAf,EAAAxD,KAAAiQ,QAAAQ,EAAAP,EAAAC,EAAAC,GAAAG,EAAA/M,EAAA,GAAA2H,EAAA3H,EAAA,GACA+M,EAAA/D,IACAgE,GAAAD,EAAAhM,GAAAiI,EAAAgE,EAAA,GAAAxR,EAAAwR,EAAA,IAEAhE,GAAA2D,EACA,OAAA3D,EAAAxN,EAEAkR,GAAApD,KAAA4D,IAAAR,EAAA1D,GAEA,OAAAA,EAAAxN,IAGA2Q,EAAA5G,UAAAuH,KAAA,SAAAP,EAAAG,EAAAC,EAAAC,GACA,GAAAjF,GAAAnM,EAAAuF,EAAArF,EAAAoE,EAAAiN,EAAA5O,EAAA4B,EAAAC,EAAAgN,EAAAC,EAAAjE,CAGA,KAFA7K,KAAAiO,EAAAA,GAAA,MAAApD,EAAA7K,EAAA,GAAA3C,EAAA2C,EAAA,GACA4B,EAAAwM,EAAAtM,kBACAvE,EAAA,EAAAoE,EAAAC,EAAA9D,OAAA6D,EAAApE,EAAAA,IAAA,CAOA,GANAqF,EAAAhB,EAAArE,GACAuR,EAAAV,EAAA7M,KAAAqB,GACAf,EAAAxD,KAAAiQ,QAAAQ,EAAAP,EAAAC,EAAAC,GAAAG,EAAA/M,EAAA,GAAA2H,EAAA3H,EAAA,GACAgJ,EAAA+D,IACAC,GAAAD,EAAAhM,GAAAiI,EAAAgE,EAAA,GAAAxR,EAAAwR,EAAA,IAEAN,GAAA1D,EACA,OAAAA,EAAAxN,EAEAmR,GAAArD,KAAA6D,IAAAR,EAAA3D,GAEA,OAAAA,EAAAxN,IAGA2Q,KAIAhQ,EAAAJ,SACA0L,IAAAA,EACAC,IAAAA,EACAyE,aAAAA,aN8kCW","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","$ = jQuery\r\n\r\n$.fn.highlight = ->\r\n  ($ this).each ->\r\n    el = $ this\r\n    $ '<div/>'\r\n      .width el.outerWidth()\r\n      .height el.outerHeight()\r\n      .css\r\n        'position': 'absolute'\r\n        'left': el.offset().left\r\n        'top': el.offset().top\r\n        'background-color': '#ffff77'\r\n        'opacity': .7\r\n        'z-index': 10\r\n      .appendTo 'body'\r\n      .fadeOut 1000\r\n      .queue -> ($ this).remove()\r\n",null,"# coffeelint: disable=max_line_length\n\n$ = jQuery\n\n{X, O, decode} = require 'aye-aye/lib/games/bin-tic-tac-toe'\n{UltimateTicTacToe} = require 'aye-aye/lib/games/ultimate-tic-tac-toe'\n\n{showSpinner, hideSpinner} = require './spinner'\nrequire './highlight'\n\n{RTC} = require './web-rtc'\nwindow.RTC = RTC\n\n$ ->\n\n  game = null\n  playerX = null\n  playerO = null\n  lastAction = null\n  createPlayerX = -> humanPlayer()\n  createPlayerO = -> computerPlayer()\n\n  # player :: {\n  #   setup : (done: ->) ->\n  #   teardown : ->\n  #   play : ->\n  #   toString : -> Str\n  # }\n\n  next = ->\n    unplayable()\n    markWins()\n    player = if game.nextPlayer is X then playerX else playerO\n    player.play()\n\n  playable = ->\n    className =\n      if game.nextPlayer is X then 'x-playable-tile' else 'o-playable-tile'\n    for [i, j] in game.possibleActions()\n      $ \"##{i}\\\\,#{j}\"\n        .addClass className\n    className\n\n  unplayable = ->\n    $ '.tile'\n      .removeClass 'x-playable-tile'\n      .removeClass 'o-playable-tile'\n      .removeClass 'human-playable-tile'\n      .off 'click'\n\n  markWins = ->\n    for i in [0...9]\n      wonBy = null\n      for j in game.winOn i\n        wonBy = game.at i, j\n        wonClass = if wonBy is X then 'x-won-tile' else 'o-won-tile'\n        ($ \"##{i}\\\\,#{j}\").addClass wonClass\n      if wonBy?\n        wonClass = if wonBy is X then 'x-won-board' else 'o-won-board'\n        ($ '#' + i).addClass wonClass\n\n  checkGameOver = ->\n    return no unless game.isTerminal()\n    $ '#info'\n      .text switch\n        when game.isWin(X) then 'X Wins!'\n        when game.isWin(O) then 'O Wins!'\n        else 'Draw!'\n    yes\n\n  playerText = -> (decode game.nextPlayer).toLowerCase()\n\n  playAction = (action) ->\n    [i, j] = action\n    hideSpinner()\n    $ \"##{i}\\\\,#{j}\"\n      .text playerText()\n      .highlight()\n    game = game.play action\n    lastAction = action\n    next()\n\n  humanPlayer = ->\n    int = (s) -> parseInt s, 10\n    parseAction = (text) ->\n      match = text.match /(\\d),(\\d)/\n      [(int match[1]), (int match[2])]\n    setup: (done) -> done()\n    play: ->\n      return if checkGameOver()\n      playableClassName = playable()\n      $ \".#{playableClassName}\"\n        .addClass 'human-playable-tile'\n        .on 'click', ->\n          $tile = $ this\n          action = parseAction $tile.get(0).id\n          playAction action\n    toString: -> \"human\"\n\n  computerPlayer = (depth = 3) ->\n    worker = new Worker 'scripts/minimax-worker.min.js'\n    setup: (done) ->\n      worker.onmessage = (e) -> playAction e.data.action\n      worker.postMessage command: 'setup', args: {depth}\n      done()\n    play: ->\n      return if checkGameOver()\n      playable()\n      showSpinner()\n      worker.postMessage command: 'play', args: {lastAction}\n    teardown: -> worker.terminate()\n    toString: -> 'computer'\n\n  RTC.greet()\n  RTC.ondatachannelopen = ->\n    # remote channel open\n    if RTC.I_am_a_host\n      createPlayerX = -> humanPlayer()\n      createPlayerO = -> remotePlayer()\n    else\n      createPlayerX = -> remotePlayer()\n      createPlayerO = -> humanPlayer()\n    setup()\n\n  remotePlayer = ->\n    newGame = -> RTC.send_message \"new\"\n    ($ '#btn-new-game').on 'click', newGame\n    RTC.onmessage = (data) ->\n      if data is \"new\" then setup() else playAction data\n    setup: (done) -> done()\n    play: ->\n      unless checkGameOver()\n        playable()\n        showSpinner()\n      RTC.send_message lastAction if lastAction?\n    teardown: -> ($ '#btn-new-game').off 'click', newGame\n    toString: -> 'remote'\n\n  setup = ->\n    teardown()\n    game = new UltimateTicTacToe\n    lastAction = null\n    [playerX, playerO] = [createPlayerX(), createPlayerO()]\n    # swap for next time\n    [createPlayerX, createPlayerO] = [createPlayerO, createPlayerX]\n    $ '#info'\n      .text playerX + ' vs ' + playerO\n    playerX.setup -> playerO.setup -> next()\n\n  teardown = ->\n    playerX?.teardown?()\n    playerO?.teardown?()\n    hideSpinner()\n    $ '.tic-tac-toe'\n      .removeClass 'x-won-board'\n      .removeClass 'o-won-board'\n    $ '.tile'\n      .removeClass 'x-won-tile'\n      .removeClass 'o-won-tile'\n      .text ''\n\n  $ '#btn-new-game'\n    .on 'click', setup\n\n  setup()\n","$ = jQuery\r\n\r\nspinner = new Spinner lines: 9, radius: 7, length: 7\r\nspinnerTimeout = null\r\nspinnerThresholdMs = 100\r\nshowSpinner = ->\r\n  unless spinnerTimeout?\r\n    target = ($ '#spinner').get 0\r\n    spinnerTimeout =\r\n      setTimeout (-> spinner.spin target), spinnerThresholdMs\r\nhideSpinner = ->\r\n  clearTimeout spinnerTimeout if spinnerTimeout?\r\n  spinner.stop()\r\n  spinnerTimeout = null\r\n\r\nmodule.exports = {showSpinner, hideSpinner}\r\n","# coffeelint: disable=max_line_length\r\n\r\nRTCPeerConnection =\r\n  window.RTCPeerConnection or\r\n  window.mozRTCPeerConnection or\r\n  window.webkitRTCPeerConnection or\r\n  window.msRTCPeerConnection\r\nRTCSessionDescription =\r\n  window.RTCSessionDescription or\r\n  window.mozRTCSessionDescription or\r\n  window.webkitRTCSessionDescription or\r\n  window.msRTCSessionDescription\r\n\r\nconfiguration = iceServers: [url: 'stun:23.21.150.121']\r\nconstraints = optional: [DtlsSrtpKeyAgreement: true]\r\n\r\nclass Host\r\n\r\n  constructor: ->\r\n    @peerConnection = new RTCPeerConnection configuration, constraints\r\n    @dataChannel = null\r\n\r\n    @peerConnection.onicecandidate = (e) =>\r\n      if e.candidate is null\r\n        @onoffercreated JSON.stringify @peerConnection.localDescription\r\n\r\n  setupDataChannel: ->\r\n    @dataChannel = @peerConnection.createDataChannel 'data', reliable: true\r\n    @dataChannel.onopen = => @onchannelopen()\r\n    @dataChannel.onmessage = (e) => @onmessage JSON.parse e.data\r\n\r\n  createOffer: ->\r\n    @setupDataChannel() # note: it's important to create the data channel before creating the offer\r\n    @peerConnection.createOffer ((offerDesc) => @peerConnection.setLocalDescription offerDesc),\r\n      -> console.warn \"Couldn't create offer\"\r\n\r\n  acceptAnswer: (answerJSON) ->\r\n    @peerConnection.setRemoteDescription new RTCSessionDescription JSON.parse answerJSON\r\n\r\n  send: (data) -> @dataChannel.send JSON.stringify data\r\n\r\nclass Guest\r\n\r\n  constructor: ->\r\n    @peerConnection = new RTCPeerConnection configuration, constraints\r\n    @dataChannel = null\r\n\r\n    @peerConnection.onicecandidate = (e) =>\r\n      if e.candidate is null\r\n        @onanswercreated JSON.stringify @peerConnection.localDescription\r\n\r\n    @peerConnection.ondatachannel = (e) =>\r\n      @dataChannel = e.channel or e\r\n      @dataChannel.onopen = => @onchannelopen()\r\n      @dataChannel.onmessage = (e) => @onmessage JSON.parse e.data\r\n\r\n  offer: (offerJSON) ->\r\n    @peerConnection.setRemoteDescription new RTCSessionDescription JSON.parse offerJSON\r\n    @peerConnection.createAnswer ((answerDesc) => @peerConnection.setLocalDescription answerDesc),\r\n      -> console.warn \"Couldn't create answer\"\r\n\r\n  send: (data) -> @dataChannel.send JSON.stringify data\r\n\r\nmodule.exports = {Host, Guest}\r\n\r\n# \"console\" API\r\n\r\ncodeColor = 'background: #222; color: #bada55'\r\n\r\nh = new Host\r\nh.onoffercreated = (offerJSON) ->\r\n  console.log \"%c#{JSON.stringify offerJSON}\", codeColor\r\n  console.log 'HOST: offer created (above), give it to your GUEST, get his answer and call: %cRTC.accept_answer(answer)', codeColor\r\nh.onchannelopen = ->\r\n  console.clear()\r\n  console.log 'HOST: data channel open'\r\n  RTC.ondatachannelopen?()\r\nh.onmessage = (data) ->\r\n  console.log 'HOST: got data', data\r\n  RTC.onmessage? data\r\n\r\ng = new Guest\r\ng.onanswercreated = (answerJSON) ->\r\n  console.log \"%c#{JSON.stringify answerJSON}\", codeColor\r\n  console.log 'GUEST: answer created (above), give it to your HOST'\r\ng.onchannelopen = ->\r\n  console.clear()\r\n  console.log 'GUEST: data channel open'\r\n  RTC.ondatachannelopen?()\r\ng.onmessage = (data) ->\r\n  console.log 'GUEST: got data', data\r\n  RTC.onmessage? data\r\n\r\nRTC =\r\n  be_a_host: ->\r\n    @I_am_a_host = yes\r\n    h.createOffer()\r\n    console.info 'wait...'\r\n  accept_answer: (answerJSON) ->\r\n    h.acceptAnswer answerJSON\r\n  be_a_guest: ->\r\n    @I_am_a_guest = yes\r\n    console.log 'GUEST: get an offer from your HOST and call: %cRTC.receive_offer(offer)', codeColor\r\n  receive_offer: (offerJSON) ->\r\n    g.offer offerJSON\r\n    console.info 'wait...'\r\n  send_message: (m) ->\r\n    if @I_am_a_host then h.send m else g.send m\r\n  greet: ->\r\n    console.log 'To play with a remote peer, start a match with %cRTC.be_a_host()', codeColor\r\n    console.log 'or accept a challenge with %cRTC.be_a_guest()', codeColor\r\n\r\nmodule.exports.RTC = RTC\r\n","var BinTicTacToe, MAX, MIN, O, X, _, allPlays, at, bin, changedOn, columns, decode, diagonals, discountedUtility, empty, evaluate, evaluateCache, isFull, isTerminal, isWin, lines, masks, openPositions, opponent, positions, ref, ref1, rows, utility, winOn, γ,\n  slice = [].slice;\n\nref = require('../minimax'), MAX = ref.MAX, MIN = ref.MIN;\n\nref1 = [0x0, 0x1, 0x2], _ = ref1[0], X = ref1[1], O = ref1[2];\n\nopponent = function(W) {\n  return ~W & 0x3;\n};\n\ndecode = function(W) {\n  return {\n    0x0: ' ',\n    0x1: 'X',\n    0x2: 'O'\n  }[W] || (function() {\n    throw new Error(W);\n  })();\n};\n\nempty = 0x0;\n\nbin = function(a) {\n  var e, i, j, len, res;\n  res = 0;\n  for (i = j = 0, len = a.length; j < len; i = ++j) {\n    e = a[i];\n    res |= e << (i * 2);\n  }\n  return res;\n};\n\nat = function(v, i) {\n  return v >> (i * 2) & 0x3;\n};\n\nrows = function(v) {\n  return [[at(v, 0), at(v, 1), at(v, 2)], [at(v, 3), at(v, 4), at(v, 5)], [at(v, 6), at(v, 7), at(v, 8)]];\n};\n\ncolumns = function(v) {\n  return [[at(v, 0), at(v, 3), at(v, 6)], [at(v, 1), at(v, 4), at(v, 7)], [at(v, 2), at(v, 5), at(v, 8)]];\n};\n\ndiagonals = function(v) {\n  return [[at(v, 0), at(v, 4), at(v, 8)], [at(v, 2), at(v, 4), at(v, 6)]];\n};\n\nlines = function(v) {\n  return slice.call(rows(v)).concat(slice.call(columns(v)), slice.call(diagonals(v)));\n};\n\nisFull = function(v) {\n  var i, j;\n  for (i = j = 0; j < 18; i = j += 2) {\n    if ((0x3 << i & v) === 0) {\n      return false;\n    }\n  }\n  return true;\n};\n\nmasks = {\n  0x1: [0x15, 0x540, 0x15000, 0x1041, 0x4104, 0x10410, 0x10101, 0x1110],\n  0x2: [0x2a, 0xa80, 0x2a000, 0x2082, 0x8208, 0x20820, 0x20202, 0x2220]\n};\n\npositions = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n\nisWin = function(v, W) {\n  var j, len, m, ms;\n  ms = masks[W] || (function() {\n    throw new Error(W);\n  })();\n  for (j = 0, len = ms.length; j < len; j++) {\n    m = ms[j];\n    if ((m & v) === m) {\n      return true;\n    }\n  }\n  return false;\n};\n\nwinOn = function(v) {\n  var w;\n  w = function(W) {\n    var i, j, len, m, ms;\n    ms = masks[W];\n    for (i = j = 0, len = ms.length; j < len; i = ++j) {\n      m = ms[i];\n      if ((m & v) === m) {\n        return positions[i];\n      }\n    }\n    return null;\n  };\n  return (w(X)) || (w(O)) || [];\n};\n\nisTerminal = function(v) {\n  return (isFull(v)) || (isWin(v, X)) || (isWin(v, O));\n};\n\nopenPositions = function(v) {\n  var i, j, results;\n  results = [];\n  for (i = j = 0; j < 9; i = ++j) {\n    if ((0x3 << (i * 2) & v) === 0) {\n      results.push(i);\n    }\n  }\n  return results;\n};\n\nallPlays = function(v, W) {\n  var i, j, res;\n  res = [];\n  for (i = j = 0; j < 18; i = j += 2) {\n    if ((0x3 << i & v) === 0) {\n      res.push(W << i | v);\n    }\n  }\n  return res;\n};\n\nchangedOn = function(v1, v2) {\n  var i, j;\n  for (i = j = 0; j < 18; i = ++j) {\n    if ((0x3 << (i * 2) & v1) !== (0x3 << (i * 2) & v2)) {\n      return i;\n    }\n  }\n  return null;\n};\n\nγ = 0.1;\n\ndiscountedUtility = function(v, depth) {\n  if (depth == null) {\n    depth = 0;\n  }\n  return Math.pow(γ, depth) * utility(v);\n};\n\nutility = function(v) {\n  if (isWin(v, X)) {\n    return 2000;\n  } else if (isWin(v, O)) {\n    return -2000;\n  } else if (isFull(v)) {\n    return 0;\n  } else {\n    return evaluate(v);\n  }\n};\n\nevaluateCache = {};\n\nevaluate = function(v) {\n  var j, k, l, len, len1, o, ref2, ref3, score, w, x;\n  if (evaluateCache[v] != null) {\n    return evaluateCache[v];\n  }\n  score = 0;\n  ref2 = lines(v);\n  for (j = 0, len = ref2.length; j < len; j++) {\n    l = ref2[j];\n    ref3 = [0, 0], x = ref3[0], o = ref3[1];\n    for (k = 0, len1 = l.length; k < len1; k++) {\n      w = l[k];\n      if (w === X) {\n        ++x;\n      }\n      if (w === O) {\n        ++o;\n      }\n    }\n    if (x === 0 || o === 0) {\n      score += Math.pow(10, x) - Math.pow(10, o);\n    }\n  }\n  return evaluateCache[v] = score;\n};\n\nBinTicTacToe = (function() {\n  BinTicTacToe.create = function() {\n    var a, args;\n    a = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (a == null) {\n      a = [_, _, _, _, _, _, _, _, _];\n    }\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(BinTicTacToe, [bin(a)].concat(slice.call(args)), function(){});\n  };\n\n  function BinTicTacToe(value1, nextPlayer, depth1) {\n    this.value = value1 != null ? value1 : empty;\n    this.nextPlayer = nextPlayer != null ? nextPlayer : X;\n    this.depth = depth1 != null ? depth1 : 0;\n  }\n\n  BinTicTacToe.prototype.at = function(i) {\n    return at(this.value, i);\n  };\n\n  BinTicTacToe.prototype.rows = function() {\n    return rows(this.value);\n  };\n\n  BinTicTacToe.prototype.columns = function() {\n    return columns(this.value);\n  };\n\n  BinTicTacToe.prototype.diagonals = function() {\n    return diagonals(this.value);\n  };\n\n  BinTicTacToe.prototype.lines = function() {\n    return lines(this.value);\n  };\n\n  BinTicTacToe.prototype.isFull = function() {\n    return isFull(this.value);\n  };\n\n  BinTicTacToe.prototype.isWin = function(W) {\n    return isWin(this.value, W);\n  };\n\n  BinTicTacToe.prototype.winOn = function() {\n    return winOn(this.value);\n  };\n\n  BinTicTacToe.prototype.isTerminal = function() {\n    return isTerminal(this.value);\n  };\n\n  BinTicTacToe.prototype.nextAgent = function() {\n    if (this.nextPlayer === X) {\n      return MAX;\n    } else {\n      return MIN;\n    }\n  };\n\n  BinTicTacToe.prototype.openPositions = function() {\n    return openPositions(this.value);\n  };\n\n  BinTicTacToe.prototype.possibleActions = function() {\n    return allPlays(this.value, this.nextPlayer);\n  };\n\n  BinTicTacToe.prototype.action = function(i) {\n    return this.nextPlayer << (i * 2) | this.value;\n  };\n\n  BinTicTacToe.prototype.positionForAction = function(action) {\n    return changedOn(this.value, action);\n  };\n\n  BinTicTacToe.prototype.play = function(value) {\n    return new this.constructor(value, this.opponent(), this.depth + 1);\n  };\n\n  BinTicTacToe.prototype.utility = function() {\n    return utility(this.value);\n  };\n\n  BinTicTacToe.prototype.opponent = function(W) {\n    if (W == null) {\n      W = this.nextPlayer;\n    }\n    return opponent(W);\n  };\n\n  BinTicTacToe.prototype.toString = function() {\n    var e, r;\n    return ((function() {\n      var j, len, ref2, results;\n      ref2 = this.rows();\n      results = [];\n      for (j = 0, len = ref2.length; j < len; j++) {\n        r = ref2[j];\n        results.push(\"|\" + (((function() {\n          var k, len1, results1;\n          results1 = [];\n          for (k = 0, len1 = r.length; k < len1; k++) {\n            e = r[k];\n            results1.push(decode(e));\n          }\n          return results1;\n        })()).join('|')) + \"|\");\n      }\n      return results;\n    }).call(this)).join(\"\\n\");\n  };\n\n  return BinTicTacToe;\n\n})();\n\nmodule.exports = {\n  _: _,\n  X: X,\n  O: O,\n  opponent: opponent,\n  decode: decode,\n  empty: empty,\n  bin: bin,\n  at: at,\n  rows: rows,\n  columns: columns,\n  diagonals: diagonals,\n  lines: lines,\n  isFull: isFull,\n  isWin: isWin,\n  isTerminal: isTerminal,\n  openPositions: openPositions,\n  allPlays: allPlays,\n  changedOn: changedOn,\n  winOn: winOn,\n  discountedUtility: discountedUtility,\n  utility: utility,\n  evaluate: evaluate,\n  BinTicTacToe: BinTicTacToe\n};\n","var BinTicTacToe, MAX, MIN, O, UltimateTicTacToe, X, _, at, bin, columns, columnsU, decode, diagonals, diagonalsU, e, empty, evaluate, isTerminal, isWin, isWinU, lines, linesU, ref, ref1, rows, rowsU, ultimateEmpty, winOn,\n  slice = [].slice;\n\nref = require('../minimax'), MAX = ref.MAX, MIN = ref.MIN;\n\nref1 = require('./bin-tic-tac-toe'), _ = ref1._, X = ref1.X, O = ref1.O, decode = ref1.decode, empty = ref1.empty, bin = ref1.bin, at = ref1.at, rows = ref1.rows, columns = ref1.columns, diagonals = ref1.diagonals, lines = ref1.lines, isWin = ref1.isWin, winOn = ref1.winOn, isTerminal = ref1.isTerminal, evaluate = ref1.evaluate, BinTicTacToe = ref1.BinTicTacToe;\n\ne = empty;\n\nultimateEmpty = [e, e, e, e, e, e, e, e, e];\n\nrowsU = function(a) {\n  var i, m, ref2, results;\n  results = [];\n  for (i = m = 0, ref2 = 3 * 3; m < ref2; i = m += 3) {\n    results.push(a.slice(i, i + 3));\n  }\n  return results;\n};\n\ncolumnsU = function(a) {\n  var i, m, results;\n  results = [];\n  for (i = m = 0; m < 3; i = ++m) {\n    results.push([a[i], a[i + 3], a[i + 6]]);\n  }\n  return results;\n};\n\ndiagonalsU = function(a) {\n  return [[a[0], a[4], a[8]], [a[2], a[4], a[6]]];\n};\n\nlinesU = function(a) {\n  return slice.call(rowsU(a)).concat(slice.call(columnsU(a)), slice.call(diagonalsU(a)));\n};\n\nisWinU = function(a, W) {\n  var l, len, m, ref2;\n  ref2 = linesU(a);\n  for (m = 0, len = ref2.length; m < len; m++) {\n    l = ref2[m];\n    if (l.every(function(v) {\n      return isWin(v, W);\n    })) {\n      return true;\n    }\n  }\n  return false;\n};\n\nUltimateTicTacToe = (function() {\n  function UltimateTicTacToe(a1, nextPlayer, lastPlayedPosition, depth) {\n    this.a = a1 != null ? a1 : ultimateEmpty;\n    this.nextPlayer = nextPlayer != null ? nextPlayer : X;\n    this.lastPlayedPosition = lastPlayedPosition != null ? lastPlayedPosition : 4;\n    this.depth = depth != null ? depth : 0;\n  }\n\n  UltimateTicTacToe.prototype.at = function(i, j) {\n    return at(this.a[i], j);\n  };\n\n  UltimateTicTacToe.prototype.rows = function() {\n    return rowsU(this.a);\n  };\n\n  UltimateTicTacToe.prototype.columns = function() {\n    return columnsU(this.a);\n  };\n\n  UltimateTicTacToe.prototype.diagonals = function() {\n    return diagonalsU(this.a);\n  };\n\n  UltimateTicTacToe.prototype.lines = function() {\n    return linesU(this.a);\n  };\n\n  UltimateTicTacToe.prototype.isTerminal = function() {\n    return (this.possibleActions().length === 0) || (this.isWin(X)) || (this.isWin(O));\n  };\n\n  UltimateTicTacToe.prototype.isWin = function(W) {\n    return isWinU(this.a, W);\n  };\n\n  UltimateTicTacToe.prototype.winOn = function(i) {\n    return winOn(this.a[i]);\n  };\n\n  UltimateTicTacToe.prototype.nextAgent = function() {\n    if (this.nextPlayer === X) {\n      return MAX;\n    } else {\n      return MIN;\n    }\n  };\n\n  UltimateTicTacToe.prototype.opponent = function(who) {\n    if (who == null) {\n      who = this.nextPlayer;\n    }\n    if (who === X) {\n      return O;\n    } else {\n      return X;\n    }\n  };\n\n  UltimateTicTacToe.prototype.boardsForNextPlay = function() {\n    var i, len, m, ref2, res, v;\n    v = this.lastPlayedPosition != null ? this.a[this.lastPlayedPosition] : null;\n    if ((v != null) && !(isTerminal(v))) {\n      return [this.lastPlayedPosition];\n    } else {\n      res = [];\n      ref2 = this.a;\n      for (i = m = 0, len = ref2.length; m < len; i = ++m) {\n        v = ref2[i];\n        if (!isTerminal(v)) {\n          res.push(i);\n        }\n      }\n      return res;\n    }\n  };\n\n  UltimateTicTacToe.prototype.openPositions = function() {\n    var i, j, js, len, m, n, ref2, res, v;\n    res = [];\n    ref2 = this.boardsForNextPlay();\n    for (m = 0, len = ref2.length; m < len; m++) {\n      i = ref2[m];\n      v = this.a[i];\n      js = [];\n      for (j = n = 0; n < 18; j = n += 2) {\n        if ((0x3 << j & v) === 0) {\n          js.push(j / 2);\n        }\n      }\n      res.push([i, js]);\n    }\n    return res;\n  };\n\n  UltimateTicTacToe.prototype.action = function(ij) {\n    return ij;\n  };\n\n  UltimateTicTacToe.prototype.possibleActions = function() {\n    var i, j, js, len, len1, m, n, ref2, ref3, res;\n    if (this.actions != null) {\n      return this.actions;\n    }\n    res = [];\n    ref2 = this.openPositions();\n    for (m = 0, len = ref2.length; m < len; m++) {\n      ref3 = ref2[m], i = ref3[0], js = ref3[1];\n      for (n = 0, len1 = js.length; n < len1; n++) {\n        j = js[n];\n        res.push([i, j]);\n      }\n    }\n    return this.actions = res;\n  };\n\n  UltimateTicTacToe.prototype.play = function(arg) {\n    var a, i, j;\n    i = arg[0], j = arg[1];\n    a = this.a.slice();\n    a[i] = this.nextPlayer << (j * 2) | a[i];\n    return new this.constructor(a, this.opponent(), j, this.depth + 1);\n  };\n\n  UltimateTicTacToe.prototype.positionForAction = function(action) {\n    return action;\n  };\n\n  UltimateTicTacToe.prototype.utility = function() {\n    var i, j, k, l, len, len1, m, n, ref2, ref3, score, v;\n    score = 0;\n    ref2 = linesU(this.a);\n    for (m = 0, len = ref2.length; m < len; m++) {\n      l = ref2[m];\n      ref3 = [0, 0, 0], i = ref3[0], j = ref3[1], k = ref3[2];\n      for (n = 0, len1 = l.length; n < len1; n++) {\n        v = l[n];\n        if (isWin(v, X)) {\n          ++i;\n        } else if (isWin(v, O)) {\n          ++j;\n        }\n        k += evaluate(v);\n      }\n      if (i === 0 || j === 0) {\n        score += Math.pow(1000, i) - Math.pow(1000, j);\n      }\n      score += k;\n    }\n    return score;\n  };\n\n  UltimateTicTacToe.prototype.toString = function() {\n    var bri, m, n, ri, s, strRows, v, vs;\n    s = '';\n    for (bri = m = 0; m <= 2; bri = ++m) {\n      vs = this.rows()[bri];\n      for (ri = n = 0; n <= 2; ri = ++n) {\n        strRows = (function() {\n          var len, o, results;\n          results = [];\n          for (o = 0, len = vs.length; o < len; o++) {\n            v = vs[o];\n            results.push(\"|\" + (((function() {\n              var len1, p, ref2, results1;\n              ref2 = (rows(v))[ri];\n              results1 = [];\n              for (p = 0, len1 = ref2.length; p < len1; p++) {\n                e = ref2[p];\n                results1.push(decode(e));\n              }\n              return results1;\n            })()).join('|')) + \"|\");\n          }\n          return results;\n        })();\n        s += strRows.join(' ║ ');\n        if (bri < 2 || ri < 2) {\n          s += '\\n';\n        }\n      }\n      if (bri < 2) {\n        s += '════════╬═════════╬════════\\n';\n      }\n    }\n    return s;\n  };\n\n  return UltimateTicTacToe;\n\n})();\n\nmodule.exports = {\n  _: _,\n  X: X,\n  O: O,\n  bin: bin,\n  UltimateTicTacToe: UltimateTicTacToe\n};\n","var MAX, MIN, MinimaxAgent, ref;\n\nref = ['MAX', 'MIN'], MAX = ref[0], MIN = ref[1];\n\nMinimaxAgent = (function() {\n  function MinimaxAgent(depth) {\n    this.depth = depth != null ? depth : Infinity;\n    this.rootAgent = MAX;\n  }\n\n  MinimaxAgent.prototype.nextAction = function(state) {\n    var _, bestAction, ref1;\n    this.rootAgent = state.nextAgent();\n    ref1 = this.minimax(state), _ = ref1[0], bestAction = ref1[1];\n    return bestAction;\n  };\n\n  MinimaxAgent.prototype.minimax = function(state, α, β, ply) {\n    var isTerminal;\n    if (α == null) {\n      α = -Infinity;\n    }\n    if (β == null) {\n      β = +Infinity;\n    }\n    if (ply == null) {\n      ply = 0;\n    }\n    isTerminal = state.isTerminal();\n    if (!isTerminal && state.nextAgent() === this.rootAgent) {\n      ++ply;\n    }\n    if (ply > this.depth || isTerminal) {\n      return [state.utility(), null];\n    } else if (state.nextAgent() === MAX) {\n      return this.maxi(state, α, β, ply);\n    } else {\n      return this.mini(state, α, β, ply);\n    }\n  };\n\n  MinimaxAgent.prototype.maxi = function(state, α, β, ply) {\n    var _, a, action, i, len, nextValue, ref1, ref2, ref3, ref4, successor, v;\n    ref1 = [-Infinity, null], v = ref1[0], a = ref1[1];\n    ref2 = state.possibleActions();\n    for (i = 0, len = ref2.length; i < len; i++) {\n      action = ref2[i];\n      successor = state.play(action);\n      ref3 = this.minimax(successor, α, β, ply), nextValue = ref3[0], _ = ref3[1];\n      if (nextValue > v) {\n        ref4 = [nextValue, action], v = ref4[0], a = ref4[1];\n      }\n      if (v >= β) {\n        return [v, a];\n      }\n      α = Math.max(α, v);\n    }\n    return [v, a];\n  };\n\n  MinimaxAgent.prototype.mini = function(state, α, β, ply) {\n    var _, a, action, i, len, nextValue, ref1, ref2, ref3, ref4, successor, v;\n    ref1 = [+Infinity, null], v = ref1[0], a = ref1[1];\n    ref2 = state.possibleActions();\n    for (i = 0, len = ref2.length; i < len; i++) {\n      action = ref2[i];\n      successor = state.play(action);\n      ref3 = this.minimax(successor, α, β, ply), nextValue = ref3[0], _ = ref3[1];\n      if (nextValue < v) {\n        ref4 = [nextValue, action], v = ref4[0], a = ref4[1];\n      }\n      if (v <= α) {\n        return [v, a];\n      }\n      β = Math.min(β, v);\n    }\n    return [v, a];\n  };\n\n  return MinimaxAgent;\n\n})();\n\nmodule.exports = {\n  MAX: MAX,\n  MIN: MIN,\n  MinimaxAgent: MinimaxAgent\n};\n"],"sourceRoot":"/source/"}