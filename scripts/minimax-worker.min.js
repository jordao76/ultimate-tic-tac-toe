!function t(n,r,o){function i(u,a){if(!r[u]){if(!n[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(e)return e(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[u]={exports:{}};n[u][0].call(c.exports,function(t){var r=n[u][1][t];return i(r?r:t)},c,c.exports,t,n,r,o)}return r[u].exports}for(var e="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,n,r){var o,i,e,u,a,l,s;o=t("aye-aye").MinimaxAgent,i=t("aye-aye/lib/games/ultimate-tic-tac-toe").UltimateTicTacToe,a=null,u=null,l=function(t,n){return Math.floor(Math.random()*(n-t)+t)},s=function(t){var n,r,o,i,e,u;if(i=t.length,0===i)return t;for(n=o=0,e=i-1;e>=0?e>o:o>e;n=e>=0?++o:--o)r=l(n,i),u=[t[r],t[n]],t[n]=u[0],t[r]=u[1];return t},i.prototype.possibleActions=function(){var t,n,r,o,i,e,u,a,l,c;if(null!=this.actions)return this.actions;for(c=[],a=this.openPositions(),o=0,e=a.length;e>o;o++)for(l=a[o],t=l[0],r=l[1],i=0,u=r.length;u>i;i++)n=r[i],c.push([t,n]);return this.actions=s(c)},self.onmessage=function(t){var n,r,o;switch(t.data.command){case"setup":return u=new i,r=t.data.args.depth,a=e(r);case"play":return o=t.data.args.lastAction,null!=o&&(u=u.play(o)),n=a.play(u),u=u.play(n),self.postMessage({action:n})}},e=function(t){var n;return null==t&&(t=3),n=new o(t),{play:function(t){return t.isTerminal()?void 0:n.nextAction(t)}}}},{"aye-aye":4,"aye-aye/lib/games/ultimate-tic-tac-toe":3}],2:[function(t,n,r){var o,i,e,u,a,l,s,c,p,f,h,y,v,g,m,x,d,w,A,P,M,T,b,O,N,X,F,W,j,U,_,q=[].slice;X=t("../minimax"),i=X.MAX,e=X.MIN,F=[0,1,2],l=F[0],a=F[1],u=F[2],O=function(t){return 3&~t},y=function(t){return{0:" ",1:"X",2:"O"}[t]||function(){throw new Error(t)}()},m=0,p=function(t){var n,r,o,i,e;for(e=0,r=o=0,i=t.length;i>o;r=++o)n=t[r],e|=n<<2*r;return e},c=function(t,n){return t>>2*n&3},W=function(t){return[[c(t,0),c(t,1),c(t,2)],[c(t,3),c(t,4),c(t,5)],[c(t,6),c(t,7),c(t,8)]]},h=function(t){return[[c(t,0),c(t,3),c(t,6)],[c(t,1),c(t,4),c(t,7)],[c(t,2),c(t,5),c(t,8)]]},v=function(t){return[[c(t,0),c(t,4),c(t,8)],[c(t,2),c(t,4),c(t,6)]]},M=function(t){return q.call(W(t)).concat(q.call(h(t)),q.call(v(t)))},w=function(t){var n,r;for(n=r=0;18>r;n=r+=2)if(0===(3<<n&t))return!1;return!0},T={1:[21,1344,86016,4161,16644,66576,65793,4368],2:[42,2688,172032,8322,33288,133152,131586,8736]},N=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],P=function(t,n){var r,o,i,e;for(e=T[n]||function(){throw new Error(n)}(),r=0,o=e.length;o>r;r++)if(i=e[r],(i&t)===i)return!0;return!1},U=function(t){var n;return n=function(n){var r,o,i,e,u;for(u=T[n],r=o=0,i=u.length;i>o;r=++o)if(e=u[r],(e&t)===e)return N[r];return null},n(a)||n(u)||[]},A=function(t){return w(t)||P(t,a)||P(t,u)},b=function(t){var n,r,o;for(o=[],n=r=0;9>r;n=++r)0===(3<<2*n&t)&&o.push(n);return o},s=function(t,n){var r,o,i;for(i=[],r=o=0;18>o;r=o+=2)0===(3<<r&t)&&i.push(n<<r|t);return i},f=function(t,n){var r,o;for(r=o=0;18>o;r=++o)if((3<<2*r&t)!==(3<<2*r&n))return r;return null},_=.1,g=function(t,n){return null==n&&(n=0),Math.pow(_,n)*j(t)},j=function(t){return P(t,a)?2e3:P(t,u)?-2e3:w(t)?0:x(t)},d={},x=function(t){var n,r,o,i,e,l,s,c,p,f,h;if(null!=d[t])return d[t];for(p=0,s=M(t),n=0,i=s.length;i>n;n++){for(o=s[n],c=[0,0],h=c[0],l=c[1],r=0,e=o.length;e>r;r++)f=o[r],f===a&&++h,f===u&&++l;(0===h||0===l)&&(p+=Math.pow(10,h)-Math.pow(10,l))}return d[t]=p},o=function(){function t(t,n,r){this.value=null!=t?t:m,this.nextPlayer=null!=n?n:a,this.depth=null!=r?r:0}return t.create=function(){var n,r;return n=arguments[0],r=2<=arguments.length?q.call(arguments,1):[],null==n&&(n=[l,l,l,l,l,l,l,l,l]),function(t,n,r){r.prototype=t.prototype;var o=new r,i=t.apply(o,n);return Object(i)===i?i:o}(t,[p(n)].concat(q.call(r)),function(){})},t.prototype.at=function(t){return c(this.value,t)},t.prototype.rows=function(){return W(this.value)},t.prototype.columns=function(){return h(this.value)},t.prototype.diagonals=function(){return v(this.value)},t.prototype.lines=function(){return M(this.value)},t.prototype.isFull=function(){return w(this.value)},t.prototype.isWin=function(t){return P(this.value,t)},t.prototype.winOn=function(){return U(this.value)},t.prototype.isTerminal=function(){return A(this.value)},t.prototype.nextAgent=function(){return this.nextPlayer===a?i:e},t.prototype.openPositions=function(){return b(this.value)},t.prototype.possibleActions=function(){return s(this.value,this.nextPlayer)},t.prototype.action=function(t){return this.nextPlayer<<2*t|this.value},t.prototype.positionForAction=function(t){return f(this.value,t)},t.prototype.play=function(t){return new this.constructor(t,this.opponent(),this.depth+1)},t.prototype.utility=function(){return j(this.value)},t.prototype.opponent=function(t){return null==t&&(t=this.nextPlayer),O(t)},t.prototype.toString=function(){var t,n;return function(){var r,o,i,e;for(i=this.rows(),e=[],r=0,o=i.length;o>r;r++)n=i[r],e.push("|"+function(){var r,o,i;for(i=[],r=0,o=n.length;o>r;r++)t=n[r],i.push(y(t));return i}().join("|")+"|");return e}.call(this).join("\n")},t}(),n.exports={_:l,X:a,O:u,opponent:O,decode:y,empty:m,bin:p,at:c,rows:W,columns:h,diagonals:v,lines:M,isFull:w,isWin:P,isTerminal:A,openPositions:b,allPlays:s,changedOn:f,winOn:U,discountedUtility:g,utility:j,evaluate:x,BinTicTacToe:o}},{"../minimax":4}],3:[function(t,n,r){var o,i,e,u,a,l,s,c,p,f,h,y,v,g,m,x,d,w,A,P,M,T,b,O,N,X,F,W,j=[].slice;b=t("../minimax"),i=b.MAX,e=b.MIN,O=t("./bin-tic-tac-toe"),s=O._,l=O.X,u=O.O,y=O.decode,x=O.empty,p=O.bin,c=O.at,N=O.rows,f=O.columns,v=O.diagonals,M=O.lines,A=O.isWin,W=O.winOn,w=O.isTerminal,d=O.evaluate,o=O.BinTicTacToe,m=x,F=[m,m,m,m,m,m,m,m,m],X=function(t){var n,r,o,i;for(i=[],n=r=0,o=9;o>r;n=r+=3)i.push(t.slice(n,n+3));return i},h=function(t){var n,r,o;for(o=[],n=r=0;3>r;n=++r)o.push([t[n],t[n+3],t[n+6]]);return o},g=function(t){return[[t[0],t[4],t[8]],[t[2],t[4],t[6]]]},T=function(t){return j.call(X(t)).concat(j.call(h(t)),j.call(g(t)))},P=function(t,n){var r,o,i,e;for(e=T(t),i=0,o=e.length;o>i;i++)if(r=e[i],r.every(function(t){return A(t,n)}))return!0;return!1},a=function(){function t(t,n,r,o){this.a=null!=t?t:F,this.nextPlayer=null!=n?n:l,this.lastPlayedPosition=null!=r?r:4,this.depth=null!=o?o:0}return t.prototype.at=function(t,n){return c(this.a[t],n)},t.prototype.rows=function(){return X(this.a)},t.prototype.columns=function(){return h(this.a)},t.prototype.diagonals=function(){return g(this.a)},t.prototype.lines=function(){return T(this.a)},t.prototype.isTerminal=function(){return 0===this.possibleActions().length||this.isWin(l)||this.isWin(u)},t.prototype.isWin=function(t){return P(this.a,t)},t.prototype.winOn=function(t){return W(this.a[t])},t.prototype.nextAgent=function(){return this.nextPlayer===l?i:e},t.prototype.opponent=function(t){return null==t&&(t=this.nextPlayer),t===l?u:l},t.prototype.boardsForNextPlay=function(){var t,n,r,o,i,e;if(e=null!=this.lastPlayedPosition?this.a[this.lastPlayedPosition]:null,null==e||w(e)){for(i=[],o=this.a,t=r=0,n=o.length;n>r;t=++r)e=o[t],w(e)||i.push(t);return i}return[this.lastPlayedPosition]},t.prototype.openPositions=function(){var t,n,r,o,i,e,u,a,l;for(a=[],u=this.boardsForNextPlay(),i=0,o=u.length;o>i;i++){for(t=u[i],l=this.a[t],r=[],n=e=0;18>e;n=e+=2)0===(3<<n&l)&&r.push(n/2);a.push([t,r])}return a},t.prototype.action=function(t){return t},t.prototype.possibleActions=function(){var t,n,r,o,i,e,u,a,l,s;if(null!=this.actions)return this.actions;for(s=[],a=this.openPositions(),e=0,o=a.length;o>e;e++)for(l=a[e],t=l[0],r=l[1],u=0,i=r.length;i>u;u++)n=r[u],s.push([t,n]);return this.actions=s},t.prototype.play=function(t){var n,r,o;return r=t[0],o=t[1],n=this.a.slice(),n[r]=this.nextPlayer<<2*o|n[r],new this.constructor(n,this.opponent(),o,this.depth+1)},t.prototype.positionForAction=function(t){return t},t.prototype.utility=function(){var t,n,r,o,i,e,a,s,c,p,f,h;for(f=0,c=T(this.a),a=0,i=c.length;i>a;a++){for(o=c[a],p=[0,0,0],t=p[0],n=p[1],r=p[2],s=0,e=o.length;e>s;s++)h=o[s],A(h,l)?++t:A(h,u)&&++n,r+=d(h);(0===t||0===n)&&(f+=Math.pow(1e3,t)-Math.pow(1e3,n)),f+=r}return f},t.prototype.toString=function(){var t,n,r,o,i,e,u,a;for(i="",t=n=0;2>=n;t=++n){for(a=this.rows()[t],o=r=0;2>=r;o=++r)e=function(){var t,n,r;for(r=[],n=0,t=a.length;t>n;n++)u=a[n],r.push("|"+function(){var t,n,r,i;for(r=N(u)[o],i=[],n=0,t=r.length;t>n;n++)m=r[n],i.push(y(m));return i}().join("|")+"|");return r}(),i+=e.join(" ║ "),(2>t||2>o)&&(i+="\n");2>t&&(i+="════════╬═════════╬════════\n")}return i},t}(),n.exports={_:s,X:l,O:u,bin:p,UltimateTicTacToe:a}},{"../minimax":4,"./bin-tic-tac-toe":2}],4:[function(t,n,r){var o,i,e,u;u=["MAX","MIN"],o=u[0],i=u[1],e=function(){function t(t){this.depth=null!=t?t:1/0,this.rootAgent=o}return t.prototype.nextAction=function(t){var n,r,o;return this.rootAgent=t.nextAgent(),o=this.minimax(t),n=o[0],r=o[1],r},t.prototype.minimax=function(t,n,r,i){var e;return null==n&&(n=-(1/0)),null==r&&(r=+(1/0)),null==i&&(i=0),e=t.isTerminal(),e||t.nextAgent()!==this.rootAgent||++i,i>this.depth||e?[t.utility(),null]:t.nextAgent()===o?this.maxi(t,n,r,i):this.mini(t,n,r,i)},t.prototype.maxi=function(t,n,r,o){var i,e,u,a,l,s,c,p,f,h,y,v;for(c=[-(1/0),null],v=c[0],e=c[1],p=t.possibleActions(),a=0,l=p.length;l>a;a++){if(u=p[a],y=t.play(u),f=this.minimax(y,n,r,o),s=f[0],i=f[1],s>v&&(h=[s,u],v=h[0],e=h[1]),v>=r)return[v,e];n=Math.max(n,v)}return[v,e]},t.prototype.mini=function(t,n,r,o){var i,e,u,a,l,s,c,p,f,h,y,v;for(c=[+(1/0),null],v=c[0],e=c[1],p=t.possibleActions(),a=0,l=p.length;l>a;a++){if(u=p[a],y=t.play(u),f=this.minimax(y,n,r,o),s=f[0],i=f[1],v>s&&(h=[s,u],v=h[0],e=h[1]),n>=v)return[v,e];r=Math.min(r,v)}return[v,e]},t}(),n.exports={MAX:o,MIN:i,MinimaxAgent:e}},{}]},{},[1]);
//# sourceMappingURL=minimax-worker.min.js.map
